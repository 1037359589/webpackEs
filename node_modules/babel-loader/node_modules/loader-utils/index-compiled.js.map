{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var JSON5 = require(\"json5\");\r\nvar path = require(\"path\");\r\n\r\nvar baseEncodeTables = {\r\n\t26: \"abcdefghijklmnopqrstuvwxyz\",\r\n\t32: \"123456789abcdefghjkmnpqrstuvwxyz\", // no 0lio\r\n\t36: \"0123456789abcdefghijklmnopqrstuvwxyz\",\r\n\t49: \"abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\", // no lIO\r\n\t52: \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n\t58: \"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\", // no 0lIO\r\n\t62: \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n\t64: \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_\"\r\n};\r\n\r\nfunction encodeBufferToBase(buffer, base, length) {\r\n\tvar encodeTable = baseEncodeTables[base];\r\n\tif (!encodeTable) throw new Error(\"Enknown encoding base\" + base);\r\n\r\n\tvar readLength = buffer.length;\r\n\r\n\tvar Big = require('big.js');\r\n\tBig.RM = Big.DP = 0;\r\n\tvar b = new Big(0);\r\n\tfor (var i = readLength - 1; i >= 0; i--) {\r\n\t\tb = b.times(256).plus(buffer[i]);\r\n\t}\r\n\r\n\tvar output = \"\";\r\n\twhile (b.gt(0)) {\r\n\t\toutput = encodeTable[b.mod(base)] + output;\r\n\t\tb = b.div(base);\r\n\t}\r\n\r\n\tBig.DP = 20;\r\n\tBig.RM = 1;\r\n\r\n\treturn output;\r\n}\r\n\r\nexports.parseQuery = function parseQuery(query) {\r\n\tvar specialValues = {\r\n\t\t'null': null,\r\n\t\t'true': true,\r\n\t\t'false': false\r\n\t};\r\n\tif(!query) return {};\r\n\tif(typeof query !== \"string\")\r\n\t\tthrow new Error(\"parseQuery should get a string as first argument\");\r\n\tif(query.substr(0, 1) !== \"?\")\r\n\t\tthrow new Error(\"a vaild query string passed to parseQuery should begin with '?'\");\r\n\tquery = query.substr(1);\r\n\tvar queryLength = query.length;\r\n\tif(query.substr(0, 1) === \"{\" && query.substr(-1) === \"}\") {\r\n\t\treturn JSON5.parse(query);\r\n\t}\r\n\tvar queryArgs = query.split(/[,\\&]/g);\r\n\tvar result = {};\r\n\tqueryArgs.forEach(function(arg) {\r\n\t\tvar idx = arg.indexOf(\"=\");\r\n\t\tif(idx >= 0) {\r\n\t\t\tvar name = arg.substr(0, idx);\r\n\t\t\tvar value = decodeURIComponent(arg.substr(idx+1));\r\n\t\t\tif (specialValues.hasOwnProperty(value)) {\r\n\t\t\t\tvalue = specialValues[value];\r\n\t\t\t}\r\n\t\t\tif(name.substr(-2) === \"[]\") {\r\n\t\t\t\tname = decodeURIComponent(name.substr(0, name.length-2));\r\n\t\t\t\tif(!Array.isArray(result[name]))\r\n\t\t\t\t\tresult[name] = [];\r\n\t\t\t\tresult[name].push(value);\r\n\t\t\t} else {\r\n\t\t\t\tresult[name] = value;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(arg.substr(0, 1) === \"-\") {\r\n\t\t\t\tresult[arg.substr(1)] = false;\r\n\t\t\t} else if(arg.substr(0, 1) === \"+\") {\r\n\t\t\t\tresult[arg.substr(1)] = true;\r\n\t\t\t} else {\r\n\t\t\t\tresult[arg] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\treturn result;\r\n};\r\n\r\nexports.stringifyRequest = function(loaderContext, request) {\r\n\tvar splitted = request.split(\"!\");\r\n\tvar context = loaderContext.context || (loaderContext.options && loaderContext.options.context);\r\n\treturn JSON.stringify(splitted.map(function(part) {\r\n\t\tif(/^\\/|^[A-Z]:/i.test(part) && context) {\r\n\t\t\tpart = path.relative(context, part);\r\n\t\t\tif(/^[A-Z]:/i.test(part)) {\r\n\t\t\t\treturn part;\r\n\t\t\t} else {\r\n\t\t\t\treturn \"./\" + part.replace(/\\\\/g, \"/\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn part;\r\n\t}).join(\"!\"));\r\n};\r\n\r\nfunction dotRequest(obj) {\r\n\treturn obj.request;\r\n}\r\n\r\nexports.getRemainingRequest = function(loaderContext) {\r\n\tvar request = loaderContext.loaders.slice(loaderContext.loaderIndex+1).map(dotRequest).concat([loaderContext.resource]);\r\n\treturn request.join(\"!\");\r\n};\r\n\r\nexports.getCurrentRequest = function(loaderContext) {\r\n\tvar request = loaderContext.loaders.slice(loaderContext.loaderIndex).map(dotRequest).concat([loaderContext.resource]);\r\n\treturn request.join(\"!\");\r\n};\r\n\r\nexports.isUrlRequest = function(url, root) {\r\n\t// An URL is not an request if\r\n\t// 1. it's a Data Url\r\n\t// 2. it's an absolute url or and protocol-relative\r\n\t// 3. it's some kind of url for a template\r\n\tif(/^data:|^chrome-extension:|^(https?:)?\\/\\/|^[\\{\\}\\[\\]#*;,'§\\$%&\\(=?`´\\^°<>]/.test(url)) return false;\r\n\t// 4. It's also not an request if root isn't set and it's a root-relative url\r\n\tif((root === undefined || root === false) && /^\\//.test(url)) return false;\r\n\treturn true;\r\n};\r\n\r\nexports.urlToRequest = function(url, root) {\r\n\tvar moduleRequestRegex = /^[^?]*~/;\r\n\tvar request;\r\n\r\n\tif(root !== undefined && root !== false && /^\\//.test(url)) {\r\n\t\t// if root is set and the url is root-relative\r\n\t\tswitch(typeof root) {\r\n\t\t\t// 1. root is a string: root is prefixed to the url\r\n\t\t\tcase \"string\":\r\n\t\t\t\t// special case: `~` roots convert to module request\r\n\t\t\t\tif (moduleRequestRegex.test(root)) {\r\n\t\t\t\t\trequest = root.replace(/([^~\\/])$/, \"$1/\") + url.slice(1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trequest = root + url;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t// 2. root is `true`: absolute paths are allowed\r\n\t\t\t//    *nix only, windows-style absolute paths are always allowed as they doesn't start with a `/`\r\n\t\t\tcase \"boolean\":\r\n\t\t\t\trequest = url;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"Unexpected parameters to loader-utils 'urlToRequest': url = \" + url + \", root = \" + root + \".\");\r\n\t\t}\r\n\t} else if(/^\\.\\.?\\//.test(url)) {\r\n\t\t// A relative url stays\r\n\t\trequest = url;\r\n\t} else {\r\n\t\t// every other url is threaded like a relative url\r\n\t\trequest = \"./\" + url;\r\n\t}\r\n\r\n\t// A `~` makes the url an module\r\n\tif (moduleRequestRegex.test(request)) {\r\n\t\trequest = request.replace(moduleRequestRegex, \"\");\r\n\t}\r\n\r\n\treturn request;\r\n};\r\n\r\nexports.parseString = function parseString(str) {\r\n\ttry {\r\n\t\tif(str[0] === '\"') return JSON.parse(str);\r\n\t\tif(str[0] === \"'\" && str.substr(str.length - 1) === \"'\") {\r\n\t\t\treturn parseString(str.replace(/\\\\.|\"/g, function(x) {\r\n\t\t\t\tif(x === '\"') return '\\\\\"';\r\n\t\t\t\treturn x;\r\n\t\t\t}).replace(/^'|'$/g, '\"'));\r\n\t\t}\r\n\t\treturn JSON.parse('\"' + str + '\"');\r\n\t} catch(e) {\r\n\t\treturn str;\r\n\t}\r\n};\r\n\r\nexports.getHashDigest = function getHashDigest(buffer, hashType, digestType, maxLength) {\r\n\thashType = hashType || \"md5\";\r\n\tmaxLength = maxLength || 9999;\r\n\tvar hash = new (require(\"crypto\").Hash)(hashType);\r\n\thash.update(buffer);\r\n\tif (digestType === \"base26\" || digestType === \"base32\" || digestType === \"base36\" ||\r\n\t    digestType === \"base49\" || digestType === \"base52\" || digestType === \"base58\" ||\r\n\t    digestType === \"base62\" || digestType === \"base64\") {\r\n\t\treturn encodeBufferToBase(hash.digest(), digestType.substr(4), maxLength).substr(0, maxLength);\r\n\t} else {\r\n\t\treturn hash.digest(digestType || \"hex\").substr(0, maxLength);\r\n\t}\r\n};\r\n\r\nexports.interpolateName = function interpolateName(loaderContext, name, options) {\r\n\tvar filename = name || \"[hash].[ext]\";\r\n\tvar context = options.context;\r\n\tvar content = options.content;\r\n\tvar regExp = options.regExp;\r\n\tvar ext = \"bin\";\r\n\tvar basename = \"file\";\r\n\tvar directory = \"\";\r\n\tif(loaderContext.resourcePath) {\r\n\t\tvar resourcePath = loaderContext.resourcePath;\r\n\t\tvar idx = resourcePath.lastIndexOf(\".\");\r\n\t\tvar i = resourcePath.lastIndexOf(\"\\\\\");\r\n\t\tvar j = resourcePath.lastIndexOf(\"/\");\r\n\t\tvar p = i < 0 ? j : j < 0 ? i : i < j ? i : j;\r\n\t\tif(idx >= 0) {\r\n\t\t\text = resourcePath.substr(idx+1);\r\n\t\t\tresourcePath = resourcePath.substr(0, idx);\r\n\t\t}\r\n\t\tif(p >= 0) {\r\n\t\t\tbasename = resourcePath.substr(p+1);\r\n\t\t\tresourcePath = resourcePath.substr(0, p+1);\r\n\t\t}\r\n\t\tif (typeof context !== 'undefined') {\r\n\t\t\tdirectory = path.relative(context, resourcePath + \"_\").replace(/\\\\/g, \"/\").replace(/\\.\\.(\\/)?/g, \"_$1\");\r\n\t\t\tdirectory = directory.substr(0, directory.length-1);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdirectory = resourcePath.replace(/\\\\/g, \"/\").replace(/\\.\\.(\\/)?/g, \"_$1\");\r\n\t\t}\r\n\t\tif(directory.length === 1) directory = \"\";\r\n\t}\r\n\tvar url = filename;\r\n\tif(content) {\r\n\t\t// Match hash template\r\n\t\turl = url.replace(/\\[(?:(\\w+):)?hash(?::([a-z]+\\d*))?(?::(\\d+))?\\]/ig, function() {\r\n\t\t\treturn exports.getHashDigest(content, arguments[1], arguments[2], parseInt(arguments[3], 10));\r\n\t\t});\r\n\t}\r\n\turl = url.replace(/\\[ext\\]/ig, function() {\r\n\t\treturn ext;\r\n\t}).replace(/\\[name\\]/ig, function() {\r\n\t\treturn basename;\r\n\t}).replace(/\\[path\\]/ig, function() {\r\n\t\treturn directory;\r\n\t});\r\n\tif(regExp && loaderContext.resourcePath) {\r\n\t\tvar re = new RegExp(regExp);\r\n\t\tvar match = loaderContext.resourcePath.match(regExp);\r\n\t\tif(match) {\r\n\t\t\tfor (var i = 1; i < match.length; i++) {\r\n\t\t\t\tvar re = new RegExp(\"\\\\[\" + i + \"\\\\]\", \"ig\");\r\n\t\t\t\turl = url.replace(re, match[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn url;\r\n};\r\n"]}