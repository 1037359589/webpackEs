{"version":3,"sources":["trailing-comma-visitors-test.js"],"names":[],"mappings":"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","file":"trailing-comma-visitors-test-compiled.js","sourcesContent":["/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @emails oncall+jsinfra@xmail.facebook.com\n */\n\n/*jshint evil:true*/\n\nrequire('mock-modules').autoMockOff();\n\ndescribe('trailing-comma', function() {\n  var transformFn;\n  var visitors;\n\n  beforeEach(function() {\n    require('mock-modules').dumpCache();\n    visitors = require('../trailing-comma-visitors').visitorList;\n    transformFn = require('../../src/jstransform').transform;\n  });\n\n  function transform(code) {\n    return transformFn(visitors, code).code;\n  }\n\n  // Functional tests.\n\n  it('should strip commas from arrays', function() {\n    var code = [\n      '([',\n      '  1,',\n      '  2, /* last item */',\n      ']);'\n    ].join('\\n');\n\n    expect(eval(transform(code))).toEqual([1, 2]);\n  });\n\n  it('should strip commas from objects', function() {\n    var code = [\n      '({',\n      '  x: 1,',\n      '  y: 2, // last item',\n      '});'\n    ].join('\\n');\n\n    expect(eval(transform(code))).toEqual({x: 1, y: 2});\n  });\n\n  // Syntax tests.\n\n  it('should transform code with trailing comma in an array', function() {\n    var code = [\n      'var arr = [',\n      '  1,',\n      '  [2, 3,],',\n      '  4 /* last, item */ ,',\n      '];'\n    ].join('\\n');\n    var result = [\n      'var arr = [',\n      '  1,',\n      '  [2, 3],',\n      '  4 /* last item */ ',\n      '];'\n    ].join('\\n');\n\n    expect(transform(code)).toEqual(result);\n  });\n\n  it('should transform code with trailing comma in an array', function() {\n    var code = [\n      'var arr = [',\n      '  1,',\n      '  2, /* last item */',\n      '];'\n    ].join('\\n');\n    var result = [\n      'var arr = [',\n      '  1,',\n      '  2 /* last item */',\n      '];'\n    ].join('\\n');\n\n    expect(transform(code)).toEqual(result);\n  });\n\n  it('should not strip trailing parenthesis', function() {\n    var code = [\n      'var result = [',\n      '  value1,',\n      '  (condition ? 1 : 2),',\n      '];'\n    ].join('\\n');\n    var result = [\n      'var result = [',\n      '  value1,',\n      '  (condition ? 1 : 2)',\n      '];'\n    ].join('\\n');\n\n    expect(transform(code)).toEqual(result);\n  });\n\n  it('should transform code with trailing comma in an object', function() {\n    var code = [\n      'var obj = {',\n      '  x: 1,',\n      '  y: 2, /*last item*/',\n      '};'\n    ].join('\\n');\n    var result = [\n      'var obj = {',\n      '  x: 1,',\n      '  y: 2 /*last item*/',\n      '};'\n    ].join('\\n');\n\n    expect(transform(code)).toEqual(result);\n  });\n\n  it('should NOT transform code with trailing hole in an array', function() {\n    var code = [\n      'var arr = [',\n      '  1,',\n      '  2,',\n      '   , /*last hole*/',\n      '];'\n    ].join('\\n');\n    var result = [\n      'var arr = [',\n      '  1,',\n      '  2,',\n      '   , /*last hole*/',\n      '];'\n    ].join('\\n');\n\n    expect(transform(code)).toEqual(result);\n  });\n\n});\n\n"]}