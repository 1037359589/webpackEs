{"version":3,"sources":["es6-rest-param-visitors.js"],"names":[],"mappings":"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","file":"es6-rest-param-visitors-compiled.js","sourcesContent":["/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/*jslint node:true*/\n\n/**\n * Desugars ES6 rest parameters into an ES3 arguments array.\n *\n * function printf(template, ...args) {\n *   args.forEach(...);\n * }\n *\n * We could use `Array.prototype.slice.call`, but that usage of arguments causes\n * functions to be deoptimized in V8, so instead we use a for-loop.\n *\n * function printf(template) {\n *   for (var args = [], $__0 = 1, $__1 = arguments.length; $__0 < $__1; $__0++)\n *     args.push(arguments[$__0]);\n *   args.forEach(...);\n * }\n *\n */\nvar Syntax = require('esprima-fb').Syntax;\nvar utils = require('../src/utils');\n\n\n\nfunction _nodeIsFunctionWithRestParam(node) {\n  return (node.type === Syntax.FunctionDeclaration\n          || node.type === Syntax.FunctionExpression\n          || node.type === Syntax.ArrowFunctionExpression)\n         && node.rest;\n}\n\nfunction visitFunctionParamsWithRestParam(traverse, node, path, state) {\n  if (node.parametricType) {\n    utils.catchup(node.parametricType.range[0], state);\n    path.unshift(node);\n    traverse(node.parametricType, path, state);\n    path.shift();\n  }\n\n  // Render params.\n  if (node.params.length) {\n    path.unshift(node);\n    traverse(node.params, path, state);\n    path.shift();\n  } else {\n    // -3 is for ... of the rest.\n    utils.catchup(node.rest.range[0] - 3, state);\n  }\n  utils.catchupWhiteSpace(node.rest.range[1], state);\n  utils.catchup(node.body.range[0], state);\n\n  path.unshift(node);\n  traverse(node.body, path, state);\n  path.shift();\n\n  return false;\n}\n\nvisitFunctionParamsWithRestParam.test = function(node, path, state) {\n  return _nodeIsFunctionWithRestParam(node);\n};\n\nfunction renderRestParamSetup(functionNode, state) {\n  var idx = state.localScope.tempVarIndex++;\n  var len = state.localScope.tempVarIndex++;\n\n  return 'for (var ' + functionNode.rest.name + '=[],' +\n    utils.getTempVar(idx) + '=' + functionNode.params.length + ',' +\n    utils.getTempVar(len) + '=arguments.length;' +\n    utils.getTempVar(idx) + '<' +  utils.getTempVar(len) + ';' +\n    utils.getTempVar(idx) + '++) ' +\n    functionNode.rest.name + '.push(arguments[' + utils.getTempVar(idx) + ']);';\n}\n\nfunction visitFunctionBodyWithRestParam(traverse, node, path, state) {\n  utils.catchup(node.range[0] + 1, state);\n  var parentNode = path[0];\n  utils.append(renderRestParamSetup(parentNode, state), state);\n  return true;\n}\n\nvisitFunctionBodyWithRestParam.test = function(node, path, state) {\n  return node.type === Syntax.BlockStatement\n         && _nodeIsFunctionWithRestParam(path[0]);\n};\n\nexports.renderRestParamSetup = renderRestParamSetup;\nexports.visitorList = [\n  visitFunctionParamsWithRestParam,\n  visitFunctionBodyWithRestParam\n];\n"]}