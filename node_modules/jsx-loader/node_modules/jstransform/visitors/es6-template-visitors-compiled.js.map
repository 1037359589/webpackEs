{"version":3,"sources":["es6-template-visitors.js"],"names":[],"mappings":"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","file":"es6-template-visitors-compiled.js","sourcesContent":["/**\n * Copyright 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/*jslint node:true*/\n\n/**\n * @typechecks\n */\n'use strict';\n\nvar Syntax = require('esprima-fb').Syntax;\nvar utils = require('../src/utils');\n\n/**\n * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-12.1.9\n */\nfunction visitTemplateLiteral(traverse, node, path, state) {\n  var templateElements = node.quasis;\n\n  utils.append('(', state);\n  for (var ii = 0; ii < templateElements.length; ii++) {\n    var templateElement = templateElements[ii];\n    if (templateElement.value.raw !== '') {\n      utils.append(getCookedValue(templateElement), state);\n      if (!templateElement.tail) {\n        // + between element and substitution\n        utils.append(' + ', state);\n      }\n      // maintain line numbers\n      utils.move(templateElement.range[0], state);\n      utils.catchupNewlines(templateElement.range[1], state);\n    } else {  // templateElement.value.raw === ''\n      // Concatenat adjacent substitutions, e.g. `${x}${y}`. Empty templates\n      // appear before the first and after the last element - nothing to add in\n      // those cases.\n      if (ii === 0) {\n        utils.append('\"\" + ', state);\n      }\n      if (ii > 0 && !templateElement.tail) {\n        // + between substitution and substitution\n        utils.append(' + ', state);\n      }\n    }\n\n    utils.move(templateElement.range[1], state);\n    if (!templateElement.tail) {\n      var substitution = node.expressions[ii];\n      if (substitution.type === Syntax.Identifier ||\n          substitution.type === Syntax.Literal ||\n          substitution.type === Syntax.MemberExpression ||\n          substitution.type === Syntax.CallExpression) {\n        utils.catchup(substitution.range[1], state);\n      } else {\n        utils.append('(', state);\n        traverse(substitution, path, state);\n        utils.catchup(substitution.range[1], state);\n        utils.append(')', state);\n      }\n      // if next templateElement isn't empty...\n      if (templateElements[ii + 1].value.cooked !== '') {\n        utils.append(' + ', state);\n      }\n    }\n  }\n  utils.move(node.range[1], state);\n  utils.append(')', state);\n  return false;\n}\n\nvisitTemplateLiteral.test = function(node, path, state) {\n  return node.type === Syntax.TemplateLiteral;\n};\n\n/**\n * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-12.2.6\n */\nfunction visitTaggedTemplateExpression(traverse, node, path, state) {\n  var template = node.quasi;\n  var numQuasis = template.quasis.length;\n\n  // print the tag\n  utils.move(node.tag.range[0], state);\n  traverse(node.tag, path, state);\n  utils.catchup(node.tag.range[1], state);\n\n  // print array of template elements\n  utils.append('(function() { var siteObj = [', state);\n  for (var ii = 0; ii < numQuasis; ii++) {\n    utils.append(getCookedValue(template.quasis[ii]), state);\n    if (ii !== numQuasis - 1) {\n      utils.append(', ', state);\n    }\n  }\n  utils.append(']; siteObj.raw = [', state);\n  for (ii = 0; ii < numQuasis; ii++) {\n    utils.append(getRawValue(template.quasis[ii]), state);\n    if (ii !== numQuasis - 1) {\n      utils.append(', ', state);\n    }\n  }\n  utils.append(\n    ']; Object.freeze(siteObj.raw); Object.freeze(siteObj); return siteObj; }()',\n    state\n  );\n\n  // print substitutions\n  if (numQuasis > 1) {\n    for (ii = 0; ii < template.expressions.length; ii++) {\n      var expression = template.expressions[ii];\n      utils.append(', ', state);\n\n      // maintain line numbers by calling catchupWhiteSpace over the whole\n      // previous TemplateElement\n      utils.move(template.quasis[ii].range[0], state);\n      utils.catchupNewlines(template.quasis[ii].range[1], state);\n\n      utils.move(expression.range[0], state);\n      traverse(expression, path, state);\n      utils.catchup(expression.range[1], state);\n    }\n  }\n\n  // print blank lines to push the closing ) down to account for the final\n  // TemplateElement.\n  utils.catchupNewlines(node.range[1], state);\n\n  utils.append(')', state);\n\n  return false;\n}\n\nvisitTaggedTemplateExpression.test = function(node, path, state) {\n  return node.type === Syntax.TaggedTemplateExpression;\n};\n\nfunction getCookedValue(templateElement) {\n  return JSON.stringify(templateElement.value.cooked);\n}\n\nfunction getRawValue(templateElement) {\n  return JSON.stringify(templateElement.value.raw);\n}\n\nexports.visitorList = [\n  visitTemplateLiteral,\n  visitTaggedTemplateExpression\n];\n"]}