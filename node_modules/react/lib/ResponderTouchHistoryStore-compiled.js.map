{"version":3,"sources":["ResponderTouchHistoryStore.js"],"names":[],"mappings":"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","file":"ResponderTouchHistoryStore-compiled.js","sourcesContent":["/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ResponderTouchHistoryStore\n */\n\n'use strict';\n\nvar EventPluginUtils = require('./EventPluginUtils');\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar isMoveish = EventPluginUtils.isMoveish;\nvar isStartish = EventPluginUtils.isStartish;\nvar isEndish = EventPluginUtils.isEndish;\n\nvar MAX_TOUCH_BANK = 20;\n\n/**\n * Touch position/time tracking information by touchID. Typically, we'll only\n * see IDs with a range of 1-20 (they are recycled when touches end and then\n * start again). This data is commonly needed by many different interaction\n * logic modules so precomputing it is very helpful to do once.\n * Each touch object in `touchBank` is of the following form:\n * { touchActive: boolean,\n *   startTimeStamp: number,\n *   startPageX: number,\n *   startPageY: number,\n *   currentPageX: number,\n *   currentPageY: number,\n *   currentTimeStamp: number\n * }\n */\nvar touchHistory = {\n  touchBank: [],\n  numberActiveTouches: 0,\n  // If there is only one active touch, we remember its location. This prevents\n  // us having to loop through all of the touches all the time in the most\n  // common case.\n  indexOfSingleActiveTouch: -1,\n  mostRecentTimeStamp: 0\n};\n\nvar timestampForTouch = function (touch) {\n  // The legacy internal implementation provides \"timeStamp\", which has been\n  // renamed to \"timestamp\". Let both work for now while we iron it out\n  // TODO (evv): rename timeStamp to timestamp in internal code\n  return touch.timeStamp || touch.timestamp;\n};\n\n/**\n * TODO: Instead of making gestures recompute filtered velocity, we could\n * include a built in velocity computation that can be reused globally.\n * @param {Touch} touch Native touch object.\n */\nvar initializeTouchData = function (touch) {\n  return {\n    touchActive: true,\n    startTimeStamp: timestampForTouch(touch),\n    startPageX: touch.pageX,\n    startPageY: touch.pageY,\n    currentPageX: touch.pageX,\n    currentPageY: touch.pageY,\n    currentTimeStamp: timestampForTouch(touch),\n    previousPageX: touch.pageX,\n    previousPageY: touch.pageY,\n    previousTimeStamp: timestampForTouch(touch)\n  };\n};\n\nvar reinitializeTouchTrack = function (touchTrack, touch) {\n  touchTrack.touchActive = true;\n  touchTrack.startTimeStamp = timestampForTouch(touch);\n  touchTrack.startPageX = touch.pageX;\n  touchTrack.startPageY = touch.pageY;\n  touchTrack.currentPageX = touch.pageX;\n  touchTrack.currentPageY = touch.pageY;\n  touchTrack.currentTimeStamp = timestampForTouch(touch);\n  touchTrack.previousPageX = touch.pageX;\n  touchTrack.previousPageY = touch.pageY;\n  touchTrack.previousTimeStamp = timestampForTouch(touch);\n};\n\nvar validateTouch = function (touch) {\n  var identifier = touch.identifier;\n  !(identifier != null) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Touch object is missing identifier') : invariant(false) : undefined;\n  if (identifier > MAX_TOUCH_BANK) {\n    console.warn('Touch identifier ' + identifier + ' is greater than maximum ' + 'supported ' + MAX_TOUCH_BANK + ' which causes performance issues ' + 'backfilling array locations for all of the indices.');\n  }\n};\n\nvar recordStartTouchData = function (touch) {\n  var touchBank = touchHistory.touchBank;\n  var identifier = touch.identifier;\n  var touchTrack = touchBank[identifier];\n  if (process.env.NODE_ENV !== 'production') {\n    validateTouch(touch);\n  }\n  if (touchTrack) {\n    reinitializeTouchTrack(touchTrack, touch);\n  } else {\n    touchBank[touch.identifier] = initializeTouchData(touch);\n  }\n  touchHistory.mostRecentTimeStamp = timestampForTouch(touch);\n};\n\nvar recordMoveTouchData = function (touch) {\n  var touchBank = touchHistory.touchBank;\n  var touchTrack = touchBank[touch.identifier];\n  if (process.env.NODE_ENV !== 'production') {\n    validateTouch(touch);\n    !touchTrack ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Touch data should have been recorded on start') : invariant(false) : undefined;\n  }\n  touchTrack.touchActive = true;\n  touchTrack.previousPageX = touchTrack.currentPageX;\n  touchTrack.previousPageY = touchTrack.currentPageY;\n  touchTrack.previousTimeStamp = touchTrack.currentTimeStamp;\n  touchTrack.currentPageX = touch.pageX;\n  touchTrack.currentPageY = touch.pageY;\n  touchTrack.currentTimeStamp = timestampForTouch(touch);\n  touchHistory.mostRecentTimeStamp = timestampForTouch(touch);\n};\n\nvar recordEndTouchData = function (touch) {\n  var touchBank = touchHistory.touchBank;\n  var touchTrack = touchBank[touch.identifier];\n  if (process.env.NODE_ENV !== 'production') {\n    validateTouch(touch);\n    !touchTrack ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Touch data should have been recorded on start') : invariant(false) : undefined;\n  }\n  touchTrack.previousPageX = touchTrack.currentPageX;\n  touchTrack.previousPageY = touchTrack.currentPageY;\n  touchTrack.previousTimeStamp = touchTrack.currentTimeStamp;\n  touchTrack.currentPageX = touch.pageX;\n  touchTrack.currentPageY = touch.pageY;\n  touchTrack.currentTimeStamp = timestampForTouch(touch);\n  touchTrack.touchActive = false;\n  touchHistory.mostRecentTimeStamp = timestampForTouch(touch);\n};\n\nvar ResponderTouchHistoryStore = {\n  recordTouchTrack: function (topLevelType, nativeEvent) {\n    var touchBank = touchHistory.touchBank;\n    if (isMoveish(topLevelType)) {\n      nativeEvent.changedTouches.forEach(recordMoveTouchData);\n    } else if (isStartish(topLevelType)) {\n      nativeEvent.changedTouches.forEach(recordStartTouchData);\n      touchHistory.numberActiveTouches = nativeEvent.touches.length;\n      if (touchHistory.numberActiveTouches === 1) {\n        touchHistory.indexOfSingleActiveTouch = nativeEvent.touches[0].identifier;\n      }\n    } else if (isEndish(topLevelType)) {\n      nativeEvent.changedTouches.forEach(recordEndTouchData);\n      touchHistory.numberActiveTouches = nativeEvent.touches.length;\n      if (touchHistory.numberActiveTouches === 1) {\n        for (var i = 0; i < touchBank.length; i++) {\n          var touchTrackToCheck = touchBank[i];\n          if (touchTrackToCheck != null && touchTrackToCheck.touchActive) {\n            touchHistory.indexOfSingleActiveTouch = i;\n            break;\n          }\n        }\n        if (process.env.NODE_ENV !== 'production') {\n          var activeTouchData = touchBank[touchHistory.indexOfSingleActiveTouch];\n          var foundActive = activeTouchData != null && !!activeTouchData.touchActive;\n          !foundActive ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Cannot find single active touch') : invariant(false) : undefined;\n        }\n      }\n    }\n  },\n\n  touchHistory: touchHistory\n};\n\nmodule.exports = ResponderTouchHistoryStore;"]}