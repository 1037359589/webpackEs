{"version":3,"sources":["SelectEventPlugin.js"],"names":[],"mappings":"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","file":"SelectEventPlugin-compiled.js","sourcesContent":["/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule SelectEventPlugin\n */\n\n'use strict';\n\nvar EventConstants = require('./EventConstants');\nvar EventPropagators = require('./EventPropagators');\nvar ExecutionEnvironment = require('fbjs/lib/ExecutionEnvironment');\nvar ReactInputSelection = require('./ReactInputSelection');\nvar SyntheticEvent = require('./SyntheticEvent');\n\nvar getActiveElement = require('fbjs/lib/getActiveElement');\nvar isTextInputElement = require('./isTextInputElement');\nvar keyOf = require('fbjs/lib/keyOf');\nvar shallowEqual = require('fbjs/lib/shallowEqual');\n\nvar topLevelTypes = EventConstants.topLevelTypes;\n\nvar skipSelectionChangeEvent = ExecutionEnvironment.canUseDOM && 'documentMode' in document && document.documentMode <= 11;\n\nvar eventTypes = {\n  select: {\n    phasedRegistrationNames: {\n      bubbled: keyOf({ onSelect: null }),\n      captured: keyOf({ onSelectCapture: null })\n    },\n    dependencies: [topLevelTypes.topBlur, topLevelTypes.topContextMenu, topLevelTypes.topFocus, topLevelTypes.topKeyDown, topLevelTypes.topMouseDown, topLevelTypes.topMouseUp, topLevelTypes.topSelectionChange]\n  }\n};\n\nvar activeElement = null;\nvar activeElementID = null;\nvar lastSelection = null;\nvar mouseDown = false;\n\n// Track whether a listener exists for this plugin. If none exist, we do\n// not extract events.\nvar hasListener = false;\nvar ON_SELECT_KEY = keyOf({ onSelect: null });\n\n/**\n * Get an object which is a unique representation of the current selection.\n *\n * The return value will not be consistent across nodes or browsers, but\n * two identical selections on the same node will return identical objects.\n *\n * @param {DOMElement} node\n * @return {object}\n */\nfunction getSelection(node) {\n  if ('selectionStart' in node && ReactInputSelection.hasSelectionCapabilities(node)) {\n    return {\n      start: node.selectionStart,\n      end: node.selectionEnd\n    };\n  } else if (window.getSelection) {\n    var selection = window.getSelection();\n    return {\n      anchorNode: selection.anchorNode,\n      anchorOffset: selection.anchorOffset,\n      focusNode: selection.focusNode,\n      focusOffset: selection.focusOffset\n    };\n  } else if (document.selection) {\n    var range = document.selection.createRange();\n    return {\n      parentElement: range.parentElement(),\n      text: range.text,\n      top: range.boundingTop,\n      left: range.boundingLeft\n    };\n  }\n}\n\n/**\n * Poll selection to see whether it's changed.\n *\n * @param {object} nativeEvent\n * @return {?SyntheticEvent}\n */\nfunction constructSelectEvent(nativeEvent, nativeEventTarget) {\n  // Ensure we have the right element, and that the user is not dragging a\n  // selection (this matches native `select` event behavior). In HTML5, select\n  // fires only on input and textarea thus if there's no focused element we\n  // won't dispatch.\n  if (mouseDown || activeElement == null || activeElement !== getActiveElement()) {\n    return null;\n  }\n\n  // Only fire when selection has actually changed.\n  var currentSelection = getSelection(activeElement);\n  if (!lastSelection || !shallowEqual(lastSelection, currentSelection)) {\n    lastSelection = currentSelection;\n\n    var syntheticEvent = SyntheticEvent.getPooled(eventTypes.select, activeElementID, nativeEvent, nativeEventTarget);\n\n    syntheticEvent.type = 'select';\n    syntheticEvent.target = activeElement;\n\n    EventPropagators.accumulateTwoPhaseDispatches(syntheticEvent);\n\n    return syntheticEvent;\n  }\n\n  return null;\n}\n\n/**\n * This plugin creates an `onSelect` event that normalizes select events\n * across form elements.\n *\n * Supported elements are:\n * - input (see `isTextInputElement`)\n * - textarea\n * - contentEditable\n *\n * This differs from native browser implementations in the following ways:\n * - Fires on contentEditable fields as well as inputs.\n * - Fires for collapsed selection.\n * - Fires after user input.\n */\nvar SelectEventPlugin = {\n\n  eventTypes: eventTypes,\n\n  /**\n   * @param {string} topLevelType Record from `EventConstants`.\n   * @param {DOMEventTarget} topLevelTarget The listening component root node.\n   * @param {string} topLevelTargetID ID of `topLevelTarget`.\n   * @param {object} nativeEvent Native browser event.\n   * @return {*} An accumulation of synthetic events.\n   * @see {EventPluginHub.extractEvents}\n   */\n  extractEvents: function (topLevelType, topLevelTarget, topLevelTargetID, nativeEvent, nativeEventTarget) {\n    if (!hasListener) {\n      return null;\n    }\n\n    switch (topLevelType) {\n      // Track the input node that has focus.\n      case topLevelTypes.topFocus:\n        if (isTextInputElement(topLevelTarget) || topLevelTarget.contentEditable === 'true') {\n          activeElement = topLevelTarget;\n          activeElementID = topLevelTargetID;\n          lastSelection = null;\n        }\n        break;\n      case topLevelTypes.topBlur:\n        activeElement = null;\n        activeElementID = null;\n        lastSelection = null;\n        break;\n\n      // Don't fire the event while the user is dragging. This matches the\n      // semantics of the native select event.\n      case topLevelTypes.topMouseDown:\n        mouseDown = true;\n        break;\n      case topLevelTypes.topContextMenu:\n      case topLevelTypes.topMouseUp:\n        mouseDown = false;\n        return constructSelectEvent(nativeEvent, nativeEventTarget);\n\n      // Chrome and IE fire non-standard event when selection is changed (and\n      // sometimes when it hasn't). IE's event fires out of order with respect\n      // to key and input events on deletion, so we discard it.\n      //\n      // Firefox doesn't support selectionchange, so check selection status\n      // after each key entry. The selection changes after keydown and before\n      // keyup, but we check on keydown as well in the case of holding down a\n      // key, when multiple keydown events are fired but only one keyup is.\n      // This is also our approach for IE handling, for the reason above.\n      case topLevelTypes.topSelectionChange:\n        if (skipSelectionChangeEvent) {\n          break;\n        }\n      // falls through\n      case topLevelTypes.topKeyDown:\n      case topLevelTypes.topKeyUp:\n        return constructSelectEvent(nativeEvent, nativeEventTarget);\n    }\n\n    return null;\n  },\n\n  didPutListener: function (id, registrationName, listener) {\n    if (registrationName === ON_SELECT_KEY) {\n      hasListener = true;\n    }\n  }\n};\n\nmodule.exports = SelectEventPlugin;"]}