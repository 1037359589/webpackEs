{"version":3,"sources":["TapEventPlugin.js"],"names":[],"mappings":"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","file":"TapEventPlugin-compiled.js","sourcesContent":["/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule TapEventPlugin\n * @typechecks static-only\n */\n\n'use strict';\n\nvar EventConstants = require('./EventConstants');\nvar EventPluginUtils = require('./EventPluginUtils');\nvar EventPropagators = require('./EventPropagators');\nvar SyntheticUIEvent = require('./SyntheticUIEvent');\nvar TouchEventUtils = require('fbjs/lib/TouchEventUtils');\nvar ViewportMetrics = require('./ViewportMetrics');\n\nvar keyOf = require('fbjs/lib/keyOf');\nvar topLevelTypes = EventConstants.topLevelTypes;\n\nvar isStartish = EventPluginUtils.isStartish;\nvar isEndish = EventPluginUtils.isEndish;\n\n/**\n * Number of pixels that are tolerated in between a `touchStart` and `touchEnd`\n * in order to still be considered a 'tap' event.\n */\nvar tapMoveThreshold = 10;\nvar startCoords = { x: null, y: null };\n\nvar Axis = {\n  x: { page: 'pageX', client: 'clientX', envScroll: 'currentPageScrollLeft' },\n  y: { page: 'pageY', client: 'clientY', envScroll: 'currentPageScrollTop' }\n};\n\nfunction getAxisCoordOfEvent(axis, nativeEvent) {\n  var singleTouch = TouchEventUtils.extractSingleTouch(nativeEvent);\n  if (singleTouch) {\n    return singleTouch[axis.page];\n  }\n  return axis.page in nativeEvent ? nativeEvent[axis.page] : nativeEvent[axis.client] + ViewportMetrics[axis.envScroll];\n}\n\nfunction getDistance(coords, nativeEvent) {\n  var pageX = getAxisCoordOfEvent(Axis.x, nativeEvent);\n  var pageY = getAxisCoordOfEvent(Axis.y, nativeEvent);\n  return Math.pow(Math.pow(pageX - coords.x, 2) + Math.pow(pageY - coords.y, 2), 0.5);\n}\n\nvar touchEvents = [topLevelTypes.topTouchStart, topLevelTypes.topTouchCancel, topLevelTypes.topTouchEnd, topLevelTypes.topTouchMove];\n\nvar dependencies = [topLevelTypes.topMouseDown, topLevelTypes.topMouseMove, topLevelTypes.topMouseUp].concat(touchEvents);\n\nvar eventTypes = {\n  touchTap: {\n    phasedRegistrationNames: {\n      bubbled: keyOf({ onTouchTap: null }),\n      captured: keyOf({ onTouchTapCapture: null })\n    },\n    dependencies: dependencies\n  }\n};\n\nvar usedTouch = false;\nvar usedTouchTime = 0;\nvar TOUCH_DELAY = 1000;\n\nvar TapEventPlugin = {\n\n  tapMoveThreshold: tapMoveThreshold,\n\n  eventTypes: eventTypes,\n\n  /**\n   * @param {string} topLevelType Record from `EventConstants`.\n   * @param {DOMEventTarget} topLevelTarget The listening component root node.\n   * @param {string} topLevelTargetID ID of `topLevelTarget`.\n   * @param {object} nativeEvent Native browser event.\n   * @return {*} An accumulation of synthetic events.\n   * @see {EventPluginHub.extractEvents}\n   */\n  extractEvents: function (topLevelType, topLevelTarget, topLevelTargetID, nativeEvent, nativeEventTarget) {\n    if (!isStartish(topLevelType) && !isEndish(topLevelType)) {\n      return null;\n    }\n    // on ios, there is a delay after touch event and synthetic\n    // mouse events, so that user can perform double tap\n    // solution: ignore mouse events following touchevent within small timeframe\n    if (touchEvents.indexOf(topLevelType) !== -1) {\n      usedTouch = true;\n      usedTouchTime = Date.now();\n    } else {\n      if (usedTouch && Date.now() - usedTouchTime < TOUCH_DELAY) {\n        return null;\n      }\n    }\n    var event = null;\n    var distance = getDistance(startCoords, nativeEvent);\n    if (isEndish(topLevelType) && distance < tapMoveThreshold) {\n      event = SyntheticUIEvent.getPooled(eventTypes.touchTap, topLevelTargetID, nativeEvent, nativeEventTarget);\n    }\n    if (isStartish(topLevelType)) {\n      startCoords.x = getAxisCoordOfEvent(Axis.x, nativeEvent);\n      startCoords.y = getAxisCoordOfEvent(Axis.y, nativeEvent);\n    } else if (isEndish(topLevelType)) {\n      startCoords.x = 0;\n      startCoords.y = 0;\n    }\n    EventPropagators.accumulateTwoPhaseDispatches(event);\n    return event;\n  }\n\n};\n\nmodule.exports = TapEventPlugin;"]}