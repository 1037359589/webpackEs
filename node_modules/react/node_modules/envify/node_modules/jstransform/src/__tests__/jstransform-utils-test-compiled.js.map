{"version":3,"sources":["jstransform-utils-test.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA,OAAO,CAAC,cAAc,CAAC,CAAC,WAAW,EAAE,CAAC;;AAEtC,QAAQ,CAAC,mBAAmB,EAAE,YAAW;AACvC,MAAI,SAAS,EAAE,KAAK,CAAC;AACrB,MAAI,MAAM,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC;;AAE1C,YAAU,CAAC,YAAW;AACpB,WAAO,CAAC,cAAc,CAAC,CAAC,SAAS,EAAE,CAAC;AACpC,aAAS,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,SAAS,CAAC;AAChD,SAAK,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;GAC7B,CAAC,CAAC;;AAEH,UAAQ,CAAC,qBAAqB,EAAE,YAAW;AACzC,MAAE,CAAC,6DAA6D,EAAE,YAAW;AAC3E,eAAS,kBAAkB,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;AACvD,aAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;AACxC,YAAI,CAAC,GAAG,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACnC,YAAI,CAAC,GAAG,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACnC,gBAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AACjC,aAAK,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,GAAG,EAAE,KAAK,CAAC,CAAC;AACrD,aAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;AACpC,eAAO,KAAK,CAAC;OACd;AACD,wBAAkB,CAAC,IAAI,GAAG,UAAS,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;AACpD,YAAI,UAAU,GAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAC7C,eAAO,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC,cAAc,KACxC,UAAU,KAAK,MAAM,CAAC,mBAAmB,IACzC,UAAU,KAAK,MAAM,CAAC,kBAAkB,CAAA,AACzC,CAAC;OACH,CAAC;;AAEF,YAAM,CAAC,SAAS,CACd,CAAC,kBAAkB,CAAC,EACpB,wBAAwB,CACzB,CAAC,IAAI,CAAC,CAAC,OAAO,CACb,0DAA0D,CAC3D,CAAC;;AAEF,YAAM,CAAC,IAAI,CAAC,SAAS,CACnB,CAAC,kBAAkB,CAAC,EACpB,yDAAyD,CAC1D,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;KACtB,CAAC,CAAC;GACJ,CAAC,CAAC;CAEJ,CAAC,CAAC","file":"jstransform-utils-test-compiled.js","sourcesContent":["/**\n * Copyright 2013 Facebook, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @emails jeffmo@fb.com\n */\n\n/*jshint evil:true*/\n\nrequire('mock-modules').autoMockOff();\n\ndescribe('jstransform-utils', function() {\n  var transform, utils;\n  var Syntax = require('esprima-fb').Syntax;\n\n  beforeEach(function() {\n    require('mock-modules').dumpCache();\n    transform = require('../jstransform').transform;\n    utils = require('../utils');\n  });\n\n  describe('temporary variables', function() {\n    it('should inject temporary variables at the start of functions', function() {\n      function visitFunctionBlock(traverse, node, path, state) {\n        utils.catchup(node.range[0] + 1, state);\n        var x = utils.injectTempVar(state);\n        var y = utils.injectTempVar(state);\n        traverse(node.body, path, state);\n        utils.append('return ' + x + ' + ' + y + ';', state);\n        utils.catchup(node.range[1], state);\n        return false;\n      }\n      visitFunctionBlock.test = function(node, path, state) {\n        var parentType = path.length && path[0].type;\n        return node.type === Syntax.BlockStatement && (\n          parentType === Syntax.FunctionDeclaration ||\n          parentType === Syntax.FunctionExpression\n        );\n      };\n\n      expect(transform(\n        [visitFunctionBlock],\n        'var x = function() {};'\n      ).code).toEqual(\n        'var x = function() {var $__0, $__1;return $__0 + $__1;};'\n      );\n\n      expect(eval(transform(\n        [visitFunctionBlock],\n        '2 + (function sum(x, y)\\t{ $__0 = x; $__1 = y; }(3, 5))'\n      ).code)).toEqual(10);\n    });\n  });\n\n});\n"]}