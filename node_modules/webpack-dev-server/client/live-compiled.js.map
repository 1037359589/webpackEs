{"version":3,"sources":["live.js"],"names":[],"mappings":"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","file":"live-compiled.js","sourcesContent":["var $ = require(\"jquery\");\r\nvar SockJS = require(\"sockjs-client\");\r\nvar stripAnsi = require('strip-ansi');\r\nrequire(\"./style.css\");\r\n\r\nvar sock = null;\r\nvar hot = false;\r\nvar currentHash = \"\";\r\n\r\nvar newConnection = function(handlers) {\r\n\tsock = new SockJS('/sockjs-node');\r\n\r\n\tsock.onclose = function() {\r\n\t\thandlers.close();\r\n\r\n\t\t// Try to reconnect.\r\n\t\tsock = null;\r\n\t\tsetTimeout(function () {\r\n\t\t\tnewConnection(handlers);\r\n\t\t}, 2000);\r\n\t};\r\n\r\n\tsock.onmessage = function(e) {\r\n\t\t// This assumes that all data sent via the websocket is JSON.\r\n\t\tvar msg = JSON.parse(e.data);\r\n\t\thandlers[msg.type](msg.data);\r\n\t};\r\n};\r\n\r\n$(function() {\r\n\tvar body = $(\"body\").html(require(\"./page.jade\")());\r\n\tvar status = $(\"#status\");\r\n\tvar okness = $(\"#okness\");\r\n\tvar $errors = $(\"#errors\");\r\n\tvar iframe = $(\"#iframe\");\r\n\tvar header = $(\".header\");\r\n\r\n\tvar contentPage = window.location.pathname.substr(\"/webpack-dev-server\".length) + window.location.search;\r\n\r\n\tstatus.text(\"Connecting to sockjs server...\");\r\n\t$errors.hide(); iframe.hide();\r\n\theader.css({borderColor: \"#96b5b4\"});\r\n\r\n\tvar onSocketMsg = {\r\n\t\thot: function() {\r\n\t\t\thot = true;\r\n\t\t\tiframe.attr(\"src\", contentPage + window.location.hash);\r\n\t\t},\r\n\t\tinvalid: function() {\r\n\t\t\tokness.text(\"\");\r\n\t\t\tstatus.text(\"App updated. Recompiling...\");\r\n\t\t\theader.css({borderColor: \"#96b5b4\"});\r\n\t\t\t$errors.hide(); if(!hot) iframe.hide();\r\n\t\t},\r\n\t\thash: function(hash) {\r\n\t\t\tcurrentHash = hash;\r\n\t\t},\r\n\t\t\"still-ok\": function() {\r\n\t\t\tokness.text(\"\");\r\n\t\t\tstatus.text(\"App ready.\");\r\n\t\t\theader.css({borderColor: \"\"});\r\n\t\t\t$errors.hide(); if(!hot) iframe.show();\r\n\t\t},\r\n\t\tok: function() {\r\n\t\t\tokness.text(\"\");\r\n\t\t\t$errors.hide();\r\n\t\t\treloadApp();\r\n\t\t},\r\n\t\twarnings: function(warnings) {\r\n\t\t\tokness.text(\"Warnings while compiling.\");\r\n\t\t\t$errors.hide();\r\n\t\t\treloadApp();\r\n\t\t},\r\n\t\terrors: function(errors) {\r\n\t\t\tstatus.text(\"App updated with errors. No reload!\");\r\n\t\t\tokness.text(\"Errors while compiling.\");\r\n\t\t\t$errors.text(\"\\n\" + stripAnsi(errors.join(\"\\n\\n\\n\")) + \"\\n\\n\");\r\n\t\t\theader.css({borderColor: \"#ebcb8b\"});\r\n\t\t\t$errors.show(); iframe.hide();\r\n\t\t},\r\n\t\t\"proxy-error\": function(errors) {\r\n\t\t\tstatus.text(\"Could not proxy to content base target!\");\r\n\t\t\tokness.text(\"Proxy error.\");\r\n\t\t\t$errors.text(\"\\n\" + stripAnsi(errors.join(\"\\n\\n\\n\")) + \"\\n\\n\");\r\n\t\t\theader.css({borderColor: \"#ebcb8b\"});\r\n\t\t\t$errors.show(); iframe.hide();\r\n\t\t},\r\n\t\tclose: function() {\r\n\t\t\tstatus.text(\"\");\r\n\t\t\tokness.text(\"Disconnected.\");\r\n\t\t\t$errors.text(\"\\n\\n\\n  Lost connection to webpack-dev-server.\\n  Please restart the server to reestablish connection...\\n\\n\\n\\n\");\r\n\t\t\theader.css({borderColor: \"#ebcb8b\"});\r\n\t\t\t$errors.show(); iframe.hide();\r\n\t\t}\r\n\t};\r\n\r\n\tnewConnection(onSocketMsg);\r\n\r\n\tiframe.load(function() {\r\n\t\tstatus.text(\"App ready.\");\r\n\t\theader.css({borderColor: \"\"});\r\n\t\tiframe.show();\r\n\t});\r\n\r\n\tfunction reloadApp() {\r\n\t\tif(hot) {\r\n\t\t\tstatus.text(\"App hot update.\");\r\n\t\t\ttry {\r\n\t\t\t\tiframe[0].contentWindow.postMessage(\"webpackHotUpdate\" + currentHash, \"*\");\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t}\r\n\t\t\tiframe.show();\r\n\t\t} else {\r\n\t\t\tstatus.text(\"App updated. Reloading app...\");\r\n\t\t\theader.css({borderColor: \"#96b5b4\"});\r\n\t\t\ttry {\r\n\t\t\t\tvar old = iframe[0].contentWindow.location + \"\";\r\n\t\t\t\tif(old.indexOf(\"about\") == 0) old = null;\r\n\t\t\t\tiframe.attr(\"src\", old || (contentPage + window.location.hash));\r\n\t\t\t\told && iframe[0].contentWindow.location.reload();\r\n\t\t\t} catch(e) {\r\n\t\t\t\tiframe.attr(\"src\", contentPage + window.location.hash);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n});\r\n"]}