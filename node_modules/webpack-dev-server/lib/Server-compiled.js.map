{"version":3,"sources":["Server.js"],"names":[],"mappings":"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","file":"Server-compiled.js","sourcesContent":["var fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar webpackDevMiddleware = require(\"webpack-dev-middleware\");\r\nvar express = require(\"express\");\r\nvar compress = require(\"compression\");\r\nvar sockjs = require(\"sockjs\");\r\nvar StreamCache = require(\"stream-cache\");\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar httpProxy = require(\"http-proxy\");\r\nvar proxy = new httpProxy.createProxyServer({secure: false});\r\nvar serveIndex = require(\"serve-index\");\r\nvar historyApiFallback = require(\"connect-history-api-fallback\");\r\n\r\nfunction Server(compiler, options) {\r\n\t// Default options\r\n\tif(!options) options = {};\r\n\r\n\tif (options.lazy && !options.filename) {\r\n\t\tthrow new Error(\"'filename' option must be set in lazy mode.\");\r\n\t}\r\n\r\n\tthis.hot = options.hot;\r\n\tthis.headers = options.headers;\r\n\tthis.sockets = [];\r\n\r\n\t// Listening for events\r\n\tvar invalidPlugin = function() {\r\n\t\tthis.sockWrite(this.sockets, \"invalid\");\r\n\t}.bind(this);\r\n\tcompiler.plugin(\"compile\", invalidPlugin);\r\n\tcompiler.plugin(\"invalid\", invalidPlugin);\r\n\tcompiler.plugin(\"done\", function(stats) {\r\n\t\tthis._sendStats(this.sockets, stats.toJson());\r\n\t\tthis._stats = stats;\r\n\t}.bind(this));\r\n\r\n\t// Prepare live html page\r\n\tvar livePage = this.livePage = new StreamCache();\r\n\tfs.createReadStream(path.join(__dirname, \"..\", \"client\", \"live.html\")).pipe(livePage);\r\n\r\n\t// Prepare the live js file\r\n\tvar liveJs = new StreamCache();\r\n\tfs.createReadStream(path.join(__dirname, \"..\", \"client\", \"live.bundle.js\")).pipe(liveJs);\r\n\r\n\t// Prepare the inlined js file\r\n\tvar inlinedJs = new StreamCache();\r\n\tfs.createReadStream(path.join(__dirname, \"..\", \"client\", \"index.bundle.js\")).pipe(inlinedJs);\r\n\r\n\t// Init express server\r\n\tvar app = this.app = new express();\r\n\r\n\t// middleware for serving webpack bundle\r\n\tthis.middleware = webpackDevMiddleware(compiler, options);\r\n\r\n\tapp.get(\"/__webpack_dev_server__/live.bundle.js\", function(req, res) {\r\n\t\tres.setHeader(\"Content-Type\", \"application/javascript\");\r\n\t\tliveJs.pipe(res);\r\n\t});\r\n\r\n\tapp.get(\"/webpack-dev-server.js\", function(req, res) {\r\n\t\tres.setHeader(\"Content-Type\", \"application/javascript\");\r\n\t\tinlinedJs.pipe(res);\r\n\t});\r\n\r\n\tapp.get(\"/webpack-dev-server/*\", function(req, res) {\r\n\t\tres.setHeader(\"Content-Type\", \"text/html\");\r\n\t\tthis.livePage.pipe(res);\r\n\t}.bind(this));\r\n\r\n\tapp.get(\"/webpack-dev-server\", function(req, res) {\r\n\t\tres.setHeader(\"Content-Type\", \"text/html\");\r\n\t\tres.write('<!DOCTYPE html><html><head><meta charset=\"utf-8\"/></head><body>');\r\n\t\tvar path = this.middleware.getFilenameFromUrl(options.publicPath || \"/\");\r\n\t\tvar fs = this.middleware.fileSystem;\r\n\t\tfunction writeDirectory(baseUrl, basePath) {\r\n\t\t\tvar content = fs.readdirSync(basePath);\r\n\t\t\tres.write(\"<ul>\");\r\n\t\t\tcontent.forEach(function(item) {\r\n\t\t\t\tvar p = basePath + \"/\" + item;\r\n\t\t\t\tif(fs.statSync(p).isFile()) {\r\n\t\t\t\t\tres.write('<li><a href=\"');\r\n\t\t\t\t\tres.write(baseUrl + item);\r\n\t\t\t\t\tres.write('\">');\r\n\t\t\t\t\tres.write(item);\r\n\t\t\t\t\tres.write('</a></li>');\r\n\t\t\t\t\tif(/\\.js$/.test(item)) {\r\n\t\t\t\t\t\tvar htmlItem = item.substr(0, item.length - 3);\r\n\t\t\t\t\t\tres.write('<li><a href=\"');\r\n\t\t\t\t\t\tres.write(baseUrl + htmlItem);\r\n\t\t\t\t\t\tres.write('\">');\r\n\t\t\t\t\t\tres.write(htmlItem);\r\n\t\t\t\t\t\tres.write('</a> (magic html for ');\r\n\t\t\t\t\t\tres.write(item);\r\n\t\t\t\t\t\tres.write(') (<a href=\"');\r\n\t\t\t\t\t\tres.write(baseUrl.replace(/(^(https?:\\/\\/[^\\/]+)?\\/)/, \"$1webpack-dev-server/\") + htmlItem);\r\n\t\t\t\t\t\tres.write('\">webpack-dev-server</a>)</li>');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tres.write('<li>');\r\n\t\t\t\t\tres.write(item);\r\n\t\t\t\t\tres.write('<br>');\r\n\t\t\t\t\twriteDirectory(baseUrl + item + \"/\", p);\r\n\t\t\t\t\tres.write('</li>');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tres.write(\"</ul>\");\r\n\t\t}\r\n\t\twriteDirectory(options.publicPath || \"/\", path);\r\n\t\tres.end('</body></html>');\r\n\t}.bind(this));\r\n\r\n\tvar features = {\r\n\t\tcompress: function() {\r\n\t\t\tif (options.compress) {\r\n\t\t\t\t// Enable gzip compression.\r\n\t\t\t\tapp.use(compress());\r\n\t\t\t}\r\n\t\t}.bind(this),\r\n\r\n\t\tproxy: function() {\r\n\t\t\tif (options.proxy) {\r\n\t\t\t\tif (!Array.isArray(options.proxy)) {\r\n\t\t\t\t\toptions.proxy = Object.keys(options.proxy).map(function (path) {\r\n\t\t\t\t\t\tvar proxyOptions;\r\n\t\t\t\t\t\tif (typeof options.proxy[path] === 'string') {\r\n\t\t\t\t\t\t\tproxyOptions = {path: path, target: options.proxy[path]};\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tproxyOptions = options.proxy[path];\r\n\t\t\t\t\t\t\tproxyOptions.path = path;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn proxyOptions;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\toptions.proxy.forEach(function (proxyOptions) {\r\n\t\t\t\t\tproxyOptions.ws = proxyOptions.hasOwnProperty('ws') ? proxyOptions.ws : true;\r\n\t\t\t\t\tapp.all(proxyOptions.path, function (req, res, next) {\r\n\t\t\t\t\t\tvar bypassUrl = typeof proxyOptions.bypass === 'function' ? proxyOptions.bypass(req, res, proxyOptions) : false;\r\n\t\t\t\t\t\tif (bypassUrl) {\r\n\t\t\t\t\t\t\treq.url = bypassUrl;\r\n\t\t\t\t\t\t\tnext();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(typeof proxyOptions.rewrite === 'function') proxyOptions.rewrite(req, proxyOptions);\r\n\t\t\t\t\t\t\tif (proxyOptions.host) {\r\n\t\t\t\t\t\t\t\treq.headers.host = proxyOptions.host;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tproxy.web(req, res, proxyOptions, function(err){\r\n\t\t\t\t\t\t\t\tvar msg = \"cannot proxy to \" + proxyOptions.target + \" (\" + err.message + \")\";\r\n\t\t\t\t\t\t\t\tthis.sockWrite(this.sockets, \"proxy-error\", [msg]);\r\n\t\t\t\t\t\t\t\tres.statusCode = 502;\r\n\t\t\t\t\t\t\t\tres.end();\r\n\t\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t\t\tif (proxyOptions.configure) {\r\n\t\t\t\t\t\t\t\tproxyOptions.configure(proxy);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t}.bind(this),\r\n\r\n\t\thistoryApiFallback: function() {\r\n\t\t\tif (options.historyApiFallback) {\r\n\t\t\t\t// Fall back to /index.html if nothing else matches.\r\n\t\t\t\tapp.use(historyApiFallback(typeof options.historyApiFallback === 'object' ? options.historyApiFallback : null));\r\n\t\t\t}\r\n\t\t}.bind(this),\r\n\r\n\t\tcontentBase: function() {\r\n\t\t\tif(options.contentBase !== false) {\r\n\t\t\t\tvar contentBase = options.contentBase || process.cwd();\r\n\r\n\t\t\t\tif(typeof contentBase === \"object\") {\r\n\t\t\t\t\tconsole.log('Using contentBase as a proxy is deprecated and will be removed in the next major version. Please use the proxy option instead.\\n\\nTo update remove the contentBase option from webpack.config.js and add this:');\r\n\t\t\t\t\tconsole.log('proxy: {\\n\\t\"*\": <your current contentBase configuration>\\n}');\r\n\t\t\t\t\t// Proxy every request to contentBase.target\r\n\t\t\t\t\tapp.all(\"*\", function(req, res) {\r\n\t\t\t\t\t\tproxy.web(req, res, contentBase, function(err) {\r\n\t\t\t\t\t\t\tvar msg = \"cannot proxy to \" + contentBase.target + \" (\" + err.message + \")\";\r\n\t\t\t\t\t\t\tthis.sockWrite(this.sockets, \"proxy-error\", [msg]);\r\n\t\t\t\t\t\t\tres.statusCode = 502;\r\n\t\t\t\t\t\t\tres.end();\r\n\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t} else if(/^(https?:)?\\/\\//.test(contentBase)) {\r\n\t\t\t\t\t// Redirect every request to contentBase\r\n\t\t\t\t\tapp.get(\"*\", function(req, res) {\r\n\t\t\t\t\t\tres.writeHead(302, {\r\n\t\t\t\t\t\t\t'Location': contentBase + req.path + (req._parsedUrl.search || \"\")\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tres.end();\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t} else if(typeof contentBase === \"number\") {\r\n\t\t\t\t\t// Redirect every request to the port contentBase\r\n\t\t\t\t\tapp.get(\"*\", function(req, res) {\r\n\t\t\t\t\t\tres.writeHead(302, {\r\n\t\t\t\t\t\t\t'Location': \"//localhost:\" + contentBase + req.path + (req._parsedUrl.search || \"\")\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tres.end();\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// route content request\r\n\t\t\t\t\tapp.get(\"*\", express.static(contentBase), serveIndex(contentBase));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(this),\r\n\r\n\t\tmiddleware: function() {\r\n\t\t\t// include our middleware to ensure it is able to handle '/index.html' request after redirect\r\n\t\t\tapp.use(this.middleware);\r\n\t\t}.bind(this),\r\n\r\n\t\theaders: function() {\r\n\t\t\tapp.get(\"*\", this.setContentHeaders.bind(this));\r\n\t\t}.bind(this),\r\n\r\n\t\tmagicHtml: function() {\r\n\t\t\tapp.get(\"*\", this.serveMagicHtml.bind(this));\r\n\t\t}.bind(this),\r\n\r\n\t\tsetup: function() {\r\n\t\t\tif(typeof options.setup === \"function\")\r\n\t\t\t\toptions.setup(app);\r\n\t\t}.bind(this)\r\n\t};\r\n\r\n\tvar defaultFeatures = [\"setup\", \"headers\", \"middleware\"];\r\n\tif(options.proxy)\r\n\t\tdefaultFeatures.push(\"proxy\");\r\n\tif(options.historyApiFallback)\r\n\t\tdefaultFeatures.push(\"historyApiFallback\", \"middleware\");\r\n\tdefaultFeatures.push(\"magicHtml\");\r\n\tif(options.contentBase !== false)\r\n\t\tdefaultFeatures.push(\"contentBase\");\r\n\t// compress is placed last and uses unshift so that it will be the first middleware used\r\n\tif(options.compress)\r\n\t\tdefaultFeatures.unshift(\"compress\");\r\n\r\n\t(options.features || defaultFeatures).forEach(function(feature) {\r\n\t\tfeatures[feature]();\r\n\t}, this);\r\n\r\n\tif (options.https) {\r\n\t\t// for keep supporting CLI parameters\r\n\t\tif (typeof options.https === 'boolean') {\r\n\t\t\toptions.https = {\r\n\t\t\t\tkey: options.key,\r\n\t\t\t\tcert: options.cert,\r\n\t\t\t\tca: options.ca\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// using built-in self-signed certificate if no certificate was configured\r\n\t\toptions.https.key = options.https.key || fs.readFileSync(path.join(__dirname, \"../ssl/server.key\"));\r\n\t\toptions.https.cert = options.https.cert || fs.readFileSync(path.join(__dirname, \"../ssl/server.crt\"));\r\n\t\toptions.https.ca = options.https.ca || fs.readFileSync(path.join(__dirname, \"../ssl/ca.crt\"));\r\n\r\n\t\tthis.listeningApp = https.createServer(options.https, app);\r\n\t} else {\r\n\t\tthis.listeningApp = http.createServer(app);\r\n\t}\r\n}\r\n\r\nServer.prototype.use = function() {\r\n\tthis.app.use.apply(this.app, arguments);\r\n}\r\n\r\nServer.prototype.setContentHeaders = function(req, res, next) {\r\n\tif(this.headers) {\r\n\t\tfor(var name in this.headers) {\r\n\t\t\tres.setHeader(name, this.headers[name]);\r\n\t\t}\r\n\t}\r\n\r\n\tnext();\r\n}\r\n\r\n// delegate listen call and init sockjs\r\nServer.prototype.listen = function() {\r\n\tthis.listeningApp.listen.apply(this.listeningApp, arguments);\r\n\tvar sockServer = sockjs.createServer({\r\n\t\t// Limit useless logs\r\n\t\tlog: function(severity, line) {\r\n\t\t\tif (severity === \"error\") {\r\n\t\t\t\tconsole.log(line);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tsockServer.on(\"connection\", function(conn) {\r\n\t\tthis.sockets.push(conn);\r\n\r\n\t\t// Remove the connection when it's closed\r\n\t\tconn.on(\"close\", function() {\r\n\t\t\tvar connIndex = this.sockets.indexOf(conn);\r\n\t\t\tif (connIndex >= 0) {\r\n\t\t\t\tthis.sockets.splice(connIndex, 1);\r\n\t\t\t}\r\n\t\t}.bind(this));\r\n\t\t\r\n\t\tif(this.hot) this.sockWrite([conn], \"hot\");\r\n\t\tif(!this._stats) return;\r\n\t\tthis._sendStats([conn], this._stats.toJson(), true);\r\n\t}.bind(this));\r\n\r\n\tsockServer.installHandlers(this.listeningApp, {\r\n\t\tprefix: '/sockjs-node'\r\n\t});\r\n}\r\n\r\nServer.prototype.close = function() {\r\n\tthis.sockets.forEach(function(sock) {\r\n\t\tsock.close();\r\n\t});\r\n\tthis.sockets = [];\r\n\tthis.middleware.close();\r\n}\r\n\r\nServer.prototype.sockWrite = function(sockets, type, data) {\r\n\tsockets.forEach(function(sock) {\r\n\t\tsock.write(JSON.stringify({type: type, data: data}));\r\n\t});\r\n}\r\n\r\nServer.prototype.serveMagicHtml = function(req, res, next) {\r\n\tvar _path = req.path;\r\n\ttry {\r\n\t\tif(!this.middleware.fileSystem.statSync(this.middleware.getFilenameFromUrl(_path + \".js\")).isFile())\r\n\t\t\treturn next();\r\n\t\t// Serve a page that executes the javascript\r\n\t\tres.write('<!DOCTYPE html><html><head><meta charset=\"utf-8\"/></head><body><script type=\"text/javascript\" charset=\"utf-8\" src=\"');\r\n\t\tres.write(_path);\r\n\t\tres.write('.js');\r\n\t\tres.write(req._parsedUrl.search || \"\");\r\n\t\tres.end('\"></script></body></html>');\r\n\t} catch(e) { return next(); }\r\n}\r\n\r\n// send stats to a socket or multiple sockets\r\nServer.prototype._sendStats = function(sockets, stats, force) {\r\n\tif(!force && stats && (!stats.errors || stats.errors.length === 0) && stats.assets && stats.assets.every(function(asset) {\r\n\t\treturn !asset.emitted;\r\n\t})) return this.sockWrite(sockets, \"still-ok\");\r\n\tthis.sockWrite(sockets, \"hash\", stats.hash);\r\n\tif(stats.errors.length > 0)\r\n\t\tthis.sockWrite(sockets, \"errors\", stats.errors);\r\n\telse if(stats.warnings.length > 0)\r\n\t\tthis.sockWrite(sockets, \"warnings\", stats.warnings);\r\n\telse\r\n\t\tthis.sockWrite(sockets, \"ok\");\r\n}\r\n\r\nServer.prototype.invalidate = function() {\r\n\tif(this.middleware) this.middleware.invalidate();\r\n}\r\n\r\nmodule.exports = Server;\r\n"]}