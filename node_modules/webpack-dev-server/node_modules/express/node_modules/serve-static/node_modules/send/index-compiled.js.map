{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["/*!\n * send\n * Copyright(c) 2012 TJ Holowaychuk\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar createError = require('http-errors')\nvar debug = require('debug')('send')\nvar deprecate = require('depd')('send')\nvar destroy = require('destroy')\nvar escapeHtml = require('escape-html')\n  , parseRange = require('range-parser')\n  , Stream = require('stream')\n  , mime = require('mime')\n  , fresh = require('fresh')\n  , path = require('path')\n  , fs = require('fs')\n  , normalize = path.normalize\n  , join = path.join\nvar etag = require('etag')\nvar EventEmitter = require('events').EventEmitter;\nvar ms = require('ms');\nvar onFinished = require('on-finished')\nvar statuses = require('statuses')\n\n/**\n * Variables.\n */\nvar extname = path.extname\nvar maxMaxAge = 60 * 60 * 24 * 365 * 1000; // 1 year\nvar resolve = path.resolve\nvar sep = path.sep\nvar toString = Object.prototype.toString\nvar upPathRegexp = /(?:^|[\\\\\\/])\\.\\.(?:[\\\\\\/]|$)/\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = send\nmodule.exports.mime = mime\n\n/**\n * Shim EventEmitter.listenerCount for node.js < 0.10\n */\n\n/* istanbul ignore next */\nvar listenerCount = EventEmitter.listenerCount\n  || function(emitter, type){ return emitter.listeners(type).length; };\n\n/**\n * Return a `SendStream` for `req` and `path`.\n *\n * @param {object} req\n * @param {string} path\n * @param {object} [options]\n * @return {SendStream}\n * @public\n */\n\nfunction send(req, path, options) {\n  return new SendStream(req, path, options);\n}\n\n/**\n * Initialize a `SendStream` with the given `path`.\n *\n * @param {Request} req\n * @param {String} path\n * @param {object} [options]\n * @private\n */\n\nfunction SendStream(req, path, options) {\n  var opts = options || {}\n\n  this.options = opts\n  this.path = path\n  this.req = req\n\n  this._etag = opts.etag !== undefined\n    ? Boolean(opts.etag)\n    : true\n\n  this._dotfiles = opts.dotfiles !== undefined\n    ? opts.dotfiles\n    : 'ignore'\n\n  if (this._dotfiles !== 'ignore' && this._dotfiles !== 'allow' && this._dotfiles !== 'deny') {\n    throw new TypeError('dotfiles option must be \"allow\", \"deny\", or \"ignore\"')\n  }\n\n  this._hidden = Boolean(opts.hidden)\n\n  if (opts.hidden !== undefined) {\n    deprecate('hidden: use dotfiles: \\'' + (this._hidden ? 'allow' : 'ignore') + '\\' instead')\n  }\n\n  // legacy support\n  if (opts.dotfiles === undefined) {\n    this._dotfiles = undefined\n  }\n\n  this._extensions = opts.extensions !== undefined\n    ? normalizeList(opts.extensions, 'extensions option')\n    : []\n\n  this._index = opts.index !== undefined\n    ? normalizeList(opts.index, 'index option')\n    : ['index.html']\n\n  this._lastModified = opts.lastModified !== undefined\n    ? Boolean(opts.lastModified)\n    : true\n\n  this._maxage = opts.maxAge || opts.maxage\n  this._maxage = typeof this._maxage === 'string'\n    ? ms(this._maxage)\n    : Number(this._maxage)\n  this._maxage = !isNaN(this._maxage)\n    ? Math.min(Math.max(0, this._maxage), maxMaxAge)\n    : 0\n\n  this._root = opts.root\n    ? resolve(opts.root)\n    : null\n\n  if (!this._root && opts.from) {\n    this.from(opts.from)\n  }\n}\n\n/**\n * Inherits from `Stream.prototype`.\n */\n\nSendStream.prototype.__proto__ = Stream.prototype;\n\n/**\n * Enable or disable etag generation.\n *\n * @param {Boolean} val\n * @return {SendStream}\n * @api public\n */\n\nSendStream.prototype.etag = deprecate.function(function etag(val) {\n  val = Boolean(val);\n  debug('etag %s', val);\n  this._etag = val;\n  return this;\n}, 'send.etag: pass etag as option');\n\n/**\n * Enable or disable \"hidden\" (dot) files.\n *\n * @param {Boolean} path\n * @return {SendStream}\n * @api public\n */\n\nSendStream.prototype.hidden = deprecate.function(function hidden(val) {\n  val = Boolean(val);\n  debug('hidden %s', val);\n  this._hidden = val;\n  this._dotfiles = undefined\n  return this;\n}, 'send.hidden: use dotfiles option');\n\n/**\n * Set index `paths`, set to a falsy\n * value to disable index support.\n *\n * @param {String|Boolean|Array} paths\n * @return {SendStream}\n * @api public\n */\n\nSendStream.prototype.index = deprecate.function(function index(paths) {\n  var index = !paths ? [] : normalizeList(paths, 'paths argument');\n  debug('index %o', paths);\n  this._index = index;\n  return this;\n}, 'send.index: pass index as option');\n\n/**\n * Set root `path`.\n *\n * @param {String} path\n * @return {SendStream}\n * @api public\n */\n\nSendStream.prototype.root = function(path){\n  path = String(path);\n  this._root = resolve(path)\n  return this;\n};\n\nSendStream.prototype.from = deprecate.function(SendStream.prototype.root,\n  'send.from: pass root as option');\n\nSendStream.prototype.root = deprecate.function(SendStream.prototype.root,\n  'send.root: pass root as option');\n\n/**\n * Set max-age to `maxAge`.\n *\n * @param {Number} maxAge\n * @return {SendStream}\n * @api public\n */\n\nSendStream.prototype.maxage = deprecate.function(function maxage(maxAge) {\n  maxAge = typeof maxAge === 'string'\n    ? ms(maxAge)\n    : Number(maxAge);\n  if (isNaN(maxAge)) maxAge = 0;\n  if (Infinity == maxAge) maxAge = 60 * 60 * 24 * 365 * 1000;\n  debug('max-age %d', maxAge);\n  this._maxage = maxAge;\n  return this;\n}, 'send.maxage: pass maxAge as option');\n\n/**\n * Emit error with `status`.\n *\n * @param {number} status\n * @param {Error} [error]\n * @private\n */\n\nSendStream.prototype.error = function error(status, error) {\n  // emit if listeners instead of responding\n  if (listenerCount(this, 'error') !== 0) {\n    return this.emit('error', createError(error, status, {\n      expose: false\n    }))\n  }\n\n  var res = this.res\n  var msg = statuses[status]\n\n  // wipe all existing headers\n  res._headers = null\n\n  // send basic response\n  res.statusCode = status\n  res.setHeader('Content-Type', 'text/plain; charset=UTF-8')\n  res.setHeader('Content-Length', Buffer.byteLength(msg))\n  res.setHeader('X-Content-Type-Options', 'nosniff')\n  res.end(msg)\n}\n\n/**\n * Check if the pathname ends with \"/\".\n *\n * @return {Boolean}\n * @api private\n */\n\nSendStream.prototype.hasTrailingSlash = function(){\n  return '/' == this.path[this.path.length - 1];\n};\n\n/**\n * Check if this is a conditional GET request.\n *\n * @return {Boolean}\n * @api private\n */\n\nSendStream.prototype.isConditionalGET = function(){\n  return this.req.headers['if-none-match']\n    || this.req.headers['if-modified-since'];\n};\n\n/**\n * Strip content-* header fields.\n *\n * @private\n */\n\nSendStream.prototype.removeContentHeaderFields = function removeContentHeaderFields() {\n  var res = this.res\n  var headers = Object.keys(res._headers || {})\n\n  for (var i = 0; i < headers.length; i++) {\n    var header = headers[i]\n    if (header.substr(0, 8) === 'content-' && header !== 'content-location') {\n      res.removeHeader(header)\n    }\n  }\n}\n\n/**\n * Respond with 304 not modified.\n *\n * @api private\n */\n\nSendStream.prototype.notModified = function(){\n  var res = this.res;\n  debug('not modified');\n  this.removeContentHeaderFields();\n  res.statusCode = 304;\n  res.end();\n};\n\n/**\n * Raise error that headers already sent.\n *\n * @api private\n */\n\nSendStream.prototype.headersAlreadySent = function headersAlreadySent(){\n  var err = new Error('Can\\'t set headers after they are sent.');\n  debug('headers already sent');\n  this.error(500, err);\n};\n\n/**\n * Check if the request is cacheable, aka\n * responded with 2xx or 304 (see RFC 2616 section 14.2{5,6}).\n *\n * @return {Boolean}\n * @api private\n */\n\nSendStream.prototype.isCachable = function(){\n  var res = this.res;\n  return (res.statusCode >= 200 && res.statusCode < 300) || 304 == res.statusCode;\n};\n\n/**\n * Handle stat() error.\n *\n * @param {Error} error\n * @private\n */\n\nSendStream.prototype.onStatError = function onStatError(error) {\n  switch (error.code) {\n    case 'ENAMETOOLONG':\n    case 'ENOENT':\n    case 'ENOTDIR':\n      this.error(404, error)\n      break\n    default:\n      this.error(500, error)\n      break\n  }\n}\n\n/**\n * Check if the cache is fresh.\n *\n * @return {Boolean}\n * @api private\n */\n\nSendStream.prototype.isFresh = function(){\n  return fresh(this.req.headers, this.res._headers);\n};\n\n/**\n * Check if the range is fresh.\n *\n * @return {Boolean}\n * @api private\n */\n\nSendStream.prototype.isRangeFresh = function isRangeFresh(){\n  var ifRange = this.req.headers['if-range'];\n\n  if (!ifRange) return true;\n\n  return ~ifRange.indexOf('\"')\n    ? ~ifRange.indexOf(this.res._headers['etag'])\n    : Date.parse(this.res._headers['last-modified']) <= Date.parse(ifRange);\n};\n\n/**\n * Redirect to path.\n *\n * @param {string} path\n * @private\n */\n\nSendStream.prototype.redirect = function redirect(path) {\n  if (listenerCount(this, 'directory') !== 0) {\n    this.emit('directory')\n    return\n  }\n\n  if (this.hasTrailingSlash()) {\n    this.error(403)\n    return\n  }\n\n  var loc = path + '/'\n  var msg = 'Redirecting to <a href=\"' + escapeHtml(loc) + '\">' + escapeHtml(loc) + '</a>\\n'\n  var res = this.res\n\n  // redirect\n  res.statusCode = 301\n  res.setHeader('Content-Type', 'text/html; charset=UTF-8')\n  res.setHeader('Content-Length', Buffer.byteLength(msg))\n  res.setHeader('X-Content-Type-Options', 'nosniff')\n  res.setHeader('Location', loc)\n  res.end(msg)\n}\n\n/**\n * Pipe to `res.\n *\n * @param {Stream} res\n * @return {Stream} res\n * @api public\n */\n\nSendStream.prototype.pipe = function(res){\n  var self = this\n    , args = arguments\n    , root = this._root;\n\n  // references\n  this.res = res;\n\n  // decode the path\n  var path = decode(this.path)\n  if (path === -1) return this.error(400)\n\n  // null byte(s)\n  if (~path.indexOf('\\0')) return this.error(400);\n\n  var parts\n  if (root !== null) {\n    // malicious path\n    if (upPathRegexp.test(normalize('.' + sep + path))) {\n      debug('malicious path \"%s\"', path)\n      return this.error(403)\n    }\n\n    // join / normalize from optional root dir\n    path = normalize(join(root, path))\n    root = normalize(root + sep)\n\n    // explode path parts\n    parts = path.substr(root.length).split(sep)\n  } else {\n    // \"..\" is malicious without \"root\"\n    if (upPathRegexp.test(path)) {\n      debug('malicious path \"%s\"', path)\n      return this.error(403)\n    }\n\n    // explode path parts\n    parts = normalize(path).split(sep)\n\n    // resolve the path\n    path = resolve(path)\n  }\n\n  // dotfile handling\n  if (containsDotFile(parts)) {\n    var access = this._dotfiles\n\n    // legacy support\n    if (access === undefined) {\n      access = parts[parts.length - 1][0] === '.'\n        ? (this._hidden ? 'allow' : 'ignore')\n        : 'allow'\n    }\n\n    debug('%s dotfile \"%s\"', access, path)\n    switch (access) {\n      case 'allow':\n        break\n      case 'deny':\n        return this.error(403)\n      case 'ignore':\n      default:\n        return this.error(404)\n    }\n  }\n\n  // index file support\n  if (this._index.length && this.path[this.path.length - 1] === '/') {\n    this.sendIndex(path);\n    return res;\n  }\n\n  this.sendFile(path);\n  return res;\n};\n\n/**\n * Transfer `path`.\n *\n * @param {String} path\n * @api public\n */\n\nSendStream.prototype.send = function(path, stat){\n  var len = stat.size;\n  var options = this.options\n  var opts = {}\n  var res = this.res;\n  var req = this.req;\n  var ranges = req.headers.range;\n  var offset = options.start || 0;\n\n  if (res._header) {\n    // impossible to send now\n    return this.headersAlreadySent();\n  }\n\n  debug('pipe \"%s\"', path)\n\n  // set header fields\n  this.setHeader(path, stat);\n\n  // set content-type\n  this.type(path);\n\n  // conditional GET support\n  if (this.isConditionalGET()\n    && this.isCachable()\n    && this.isFresh()) {\n    return this.notModified();\n  }\n\n  // adjust len to start/end options\n  len = Math.max(0, len - offset);\n  if (options.end !== undefined) {\n    var bytes = options.end - offset + 1;\n    if (len > bytes) len = bytes;\n  }\n\n  // Range support\n  if (ranges) {\n    ranges = parseRange(len, ranges);\n\n    // If-Range support\n    if (!this.isRangeFresh()) {\n      debug('range stale');\n      ranges = -2;\n    }\n\n    // unsatisfiable\n    if (-1 == ranges) {\n      debug('range unsatisfiable');\n      res.setHeader('Content-Range', 'bytes */' + stat.size);\n      return this.error(416);\n    }\n\n    // valid (syntactically invalid/multiple ranges are treated as a regular response)\n    if (-2 != ranges && ranges.length === 1) {\n      debug('range %j', ranges);\n\n      // Content-Range\n      res.statusCode = 206;\n      res.setHeader('Content-Range', 'bytes '\n        + ranges[0].start\n        + '-'\n        + ranges[0].end\n        + '/'\n        + len);\n\n      offset += ranges[0].start;\n      len = ranges[0].end - ranges[0].start + 1;\n    }\n  }\n\n  // clone options\n  for (var prop in options) {\n    opts[prop] = options[prop]\n  }\n\n  // set read options\n  opts.start = offset\n  opts.end = Math.max(offset, offset + len - 1)\n\n  // content-length\n  res.setHeader('Content-Length', len);\n\n  // HEAD support\n  if ('HEAD' == req.method) return res.end();\n\n  this.stream(path, opts)\n};\n\n/**\n * Transfer file for `path`.\n *\n * @param {String} path\n * @api private\n */\nSendStream.prototype.sendFile = function sendFile(path) {\n  var i = 0\n  var self = this\n\n  debug('stat \"%s\"', path);\n  fs.stat(path, function onstat(err, stat) {\n    if (err && err.code === 'ENOENT'\n      && !extname(path)\n      && path[path.length - 1] !== sep) {\n      // not found, check extensions\n      return next(err)\n    }\n    if (err) return self.onStatError(err)\n    if (stat.isDirectory()) return self.redirect(self.path)\n    self.emit('file', path, stat)\n    self.send(path, stat)\n  })\n\n  function next(err) {\n    if (self._extensions.length <= i) {\n      return err\n        ? self.onStatError(err)\n        : self.error(404)\n    }\n\n    var p = path + '.' + self._extensions[i++]\n\n    debug('stat \"%s\"', p)\n    fs.stat(p, function (err, stat) {\n      if (err) return next(err)\n      if (stat.isDirectory()) return next()\n      self.emit('file', p, stat)\n      self.send(p, stat)\n    })\n  }\n}\n\n/**\n * Transfer index for `path`.\n *\n * @param {String} path\n * @api private\n */\nSendStream.prototype.sendIndex = function sendIndex(path){\n  var i = -1;\n  var self = this;\n\n  function next(err){\n    if (++i >= self._index.length) {\n      if (err) return self.onStatError(err);\n      return self.error(404);\n    }\n\n    var p = join(path, self._index[i]);\n\n    debug('stat \"%s\"', p);\n    fs.stat(p, function(err, stat){\n      if (err) return next(err);\n      if (stat.isDirectory()) return next();\n      self.emit('file', p, stat);\n      self.send(p, stat);\n    });\n  }\n\n  next();\n};\n\n/**\n * Stream `path` to the response.\n *\n * @param {String} path\n * @param {Object} options\n * @api private\n */\n\nSendStream.prototype.stream = function(path, options){\n  // TODO: this is all lame, refactor meeee\n  var finished = false;\n  var self = this;\n  var res = this.res;\n  var req = this.req;\n\n  // pipe\n  var stream = fs.createReadStream(path, options);\n  this.emit('stream', stream);\n  stream.pipe(res);\n\n  // response finished, done with the fd\n  onFinished(res, function onfinished(){\n    finished = true;\n    destroy(stream);\n  });\n\n  // error handling code-smell\n  stream.on('error', function onerror(err){\n    // request already finished\n    if (finished) return;\n\n    // clean up stream\n    finished = true;\n    destroy(stream);\n\n    // error\n    self.onStatError(err);\n  });\n\n  // end\n  stream.on('end', function onend(){\n    self.emit('end');\n  });\n};\n\n/**\n * Set content-type based on `path`\n * if it hasn't been explicitly set.\n *\n * @param {String} path\n * @api private\n */\n\nSendStream.prototype.type = function(path){\n  var res = this.res;\n  if (res.getHeader('Content-Type')) return;\n  var type = mime.lookup(path);\n  var charset = mime.charsets.lookup(type);\n  debug('content-type %s', type);\n  res.setHeader('Content-Type', type + (charset ? '; charset=' + charset : ''));\n};\n\n/**\n * Set response header fields, most\n * fields may be pre-defined.\n *\n * @param {String} path\n * @param {Object} stat\n * @api private\n */\n\nSendStream.prototype.setHeader = function setHeader(path, stat){\n  var res = this.res;\n\n  this.emit('headers', res, path, stat);\n\n  if (!res.getHeader('Accept-Ranges')) res.setHeader('Accept-Ranges', 'bytes');\n  if (!res.getHeader('Cache-Control')) res.setHeader('Cache-Control', 'public, max-age=' + Math.floor(this._maxage / 1000));\n\n  if (this._lastModified && !res.getHeader('Last-Modified')) {\n    var modified = stat.mtime.toUTCString()\n    debug('modified %s', modified)\n    res.setHeader('Last-Modified', modified)\n  }\n\n  if (this._etag && !res.getHeader('ETag')) {\n    var val = etag(stat)\n    debug('etag %s', val)\n    res.setHeader('ETag', val)\n  }\n};\n\n/**\n * Determine if path parts contain a dotfile.\n *\n * @api private\n */\n\nfunction containsDotFile(parts) {\n  for (var i = 0; i < parts.length; i++) {\n    if (parts[i][0] === '.') {\n      return true\n    }\n  }\n\n  return false\n}\n\n/**\n * decodeURIComponent.\n *\n * Allows V8 to only deoptimize this fn instead of all\n * of send().\n *\n * @param {String} path\n * @api private\n */\n\nfunction decode(path) {\n  try {\n    return decodeURIComponent(path)\n  } catch (err) {\n    return -1\n  }\n}\n\n/**\n * Normalize the index option into an array.\n *\n * @param {boolean|string|array} val\n * @param {string} name\n * @private\n */\n\nfunction normalizeList(val, name) {\n  var list = [].concat(val || [])\n\n  for (var i = 0; i < list.length; i++) {\n    if (typeof list[i] !== 'string') {\n      throw new TypeError(name + ' must be array of strings or false')\n    }\n  }\n\n  return list\n}\n"]}