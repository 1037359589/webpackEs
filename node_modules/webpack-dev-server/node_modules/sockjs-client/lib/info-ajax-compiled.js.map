{"version":3,"sources":["info-ajax.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAI,YAAY,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,YAAY;IAC7C,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC;IAC9B,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC;IACxB,WAAW,GAAG,OAAO,CAAC,gBAAgB,CAAC,CACxC;;AAEH,IAAI,KAAK,GAAG,YAAW,EAAE,CAAC;AAC1B,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EAAE;AACzC,OAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,yBAAyB,CAAC,CAAC;CACrD;;AAED,SAAS,QAAQ,CAAC,GAAG,EAAE,UAAU,EAAE;AACjC,cAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAExB,MAAI,IAAI,GAAG,IAAI,CAAC;AAChB,MAAI,EAAE,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC;AACrB,MAAI,CAAC,EAAE,GAAG,IAAI,UAAU,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;;AAErC,MAAI,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAS,MAAM,EAAE,IAAI,EAAE;AAC5C,QAAI,IAAI,EAAE,GAAG,CAAC;AACd,QAAI,MAAM,KAAK,GAAG,EAAE;AAClB,SAAG,GAAG,AAAC,CAAC,IAAI,IAAI,EAAE,GAAI,EAAE,CAAC;AACzB,UAAI,IAAI,EAAE;AACR,YAAI;AACF,cAAI,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SAC1B,CAAC,OAAO,CAAC,EAAE;AACV,eAAK,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;SACzB;OACF;;AAED,UAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AAC/B,YAAI,GAAG,EAAE,CAAC;OACX;KACF;AACD,QAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;AAC/B,QAAI,CAAC,kBAAkB,EAAE,CAAC;GAC3B,CAAC,CAAC;CACJ;;AAED,QAAQ,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;;AAEjC,QAAQ,CAAC,SAAS,CAAC,KAAK,GAAG,YAAW;AACpC,MAAI,CAAC,kBAAkB,EAAE,CAAC;AAC1B,MAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;CACjB,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,QAAQ,CAAC","file":"info-ajax-compiled.js","sourcesContent":["'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , objectUtils = require('./utils/object')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-ajax');\n}\n\nfunction InfoAjax(url, AjaxObject) {\n  EventEmitter.call(this);\n\n  var self = this;\n  var t0 = +new Date();\n  this.xo = new AjaxObject('GET', url);\n\n  this.xo.once('finish', function(status, text) {\n    var info, rtt;\n    if (status === 200) {\n      rtt = (+new Date()) - t0;\n      if (text) {\n        try {\n          info = JSON3.parse(text);\n        } catch (e) {\n          debug('bad json', text);\n        }\n      }\n\n      if (!objectUtils.isObject(info)) {\n        info = {};\n      }\n    }\n    self.emit('finish', info, rtt);\n    self.removeAllListeners();\n  });\n}\n\ninherits(InfoAjax, EventEmitter);\n\nInfoAjax.prototype.close = function() {\n  this.removeAllListeners();\n  this.xo.close();\n};\n\nmodule.exports = InfoAjax;\n"]}