{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compiled.js","sourcesContent":["'use strict';\n\nrequire('./shims');\n\nvar URL = require('url-parse')\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , random = require('./utils/random')\n  , escape = require('./utils/escape')\n  , urlUtils = require('./utils/url')\n  , eventUtils = require('./utils/event')\n  , transport = require('./utils/transport')\n  , objectUtils = require('./utils/object')\n  , browser = require('./utils/browser')\n  , log = require('./utils/log')\n  , Event = require('./event/event')\n  , EventTarget = require('./event/eventtarget')\n  , loc = require('./location')\n  , CloseEvent = require('./event/close')\n  , TransportMessageEvent = require('./event/trans-message')\n  , InfoReceiver = require('./info-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  // Make debug module available globally so you can enable via the console easily\n  global.dbg = require('debug');\n  debug = global.dbg('sockjs-client:main');\n}\n\nvar transports;\n\n// follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface\nfunction SockJS(url, protocols, options) {\n  if (!(this instanceof SockJS)) {\n    return new SockJS(url, protocols, options);\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'SockJS: 1 argument required, but only 0 present\");\n  }\n  EventTarget.call(this);\n\n  this.readyState = SockJS.CONNECTING;\n  this.extensions = '';\n  this.protocol = '';\n\n  // non-standard extension\n  options = options || {};\n  if (options.protocols_whitelist) {\n    log.warn(\"'protocols_whitelist' is DEPRECATED. Use 'transports' instead.\");\n  }\n  this._transportsWhitelist = options.transports;\n\n  var sessionId = options.sessionId || 8;\n  if (typeof sessionId === 'function') {\n    this._generateSessionId = sessionId;\n  } else if (typeof sessionId === 'number') {\n    this._generateSessionId = function() {\n      return random.string(sessionId);\n    };\n  } else {\n    throw new TypeError(\"If sessionId is used in the options, it needs to be a number or a function.\");\n  }\n\n  this._server = options.server || random.numberString(1000);\n\n  // Step 1 of WS spec - parse and validate the url. Issue #8\n  var parsedUrl = new URL(url);\n  if (!parsedUrl.host || !parsedUrl.protocol) {\n    throw new SyntaxError(\"The URL '\" + url + \"' is invalid\");\n  } else if (parsedUrl.hash) {\n    throw new SyntaxError('The URL must not contain a fragment');\n  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n    throw new SyntaxError(\"The URL's scheme must be either 'http:' or 'https:'. '\" + parsedUrl.protocol + \"' is not allowed.\");\n  }\n\n  var secure = parsedUrl.protocol === 'https:';\n  // Step 2 - don't allow secure origin with an insecure protocol\n  if (loc.protocol === 'https' && !secure) {\n    throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');\n  }\n\n  // Step 3 - check port access - no need here\n  // Step 4 - parse protocols argument\n  if (!protocols) {\n    protocols = [];\n  } else if (!Array.isArray(protocols)) {\n    protocols = [protocols];\n  }\n\n  // Step 5 - check protocols argument\n  var sortedProtocols = protocols.sort();\n  sortedProtocols.forEach(function(proto, i) {\n    if (!proto) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is invalid.\");\n    }\n    if (i < (sortedProtocols.length - 1) && proto === sortedProtocols[i + 1]) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is duplicated.\");\n    }\n  });\n\n  // Step 6 - convert origin\n  var o = urlUtils.getOrigin(loc.href);\n  this._origin = o ? o.toLowerCase() : null;\n\n  // remove the trailing slash\n  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\\/+$/, ''));\n\n  // store the sanitized url\n  this.url = parsedUrl.href;\n  debug('using url', this.url);\n\n  // Step 7 - start connection in background\n  // obtain server info\n  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26\n  this._urlInfo = {\n    nullOrigin: !browser.hasDomain()\n  , sameOrigin: urlUtils.isOriginEqual(this.url, loc.href)\n  , sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)\n  };\n\n  this._ir = new InfoReceiver(this.url, this._urlInfo);\n  this._ir.once('finish', this._receiveInfo.bind(this));\n}\n\ninherits(SockJS, EventTarget);\n\nfunction userSetCode(code) {\n  return code === 1000 || (code >= 3000 && code <= 4999);\n}\n\nSockJS.prototype.close = function(code, reason) {\n  // Step 1\n  if (code && !userSetCode(code)) {\n    throw new Error('InvalidAccessError: Invalid code');\n  }\n  // Step 2.4 states the max is 123 bytes, but we are just checking length\n  if (reason && reason.length > 123) {\n    throw new SyntaxError('reason argument has an invalid length');\n  }\n\n  // Step 3.1\n  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {\n    return;\n  }\n\n  // TODO look at docs to determine how to set this\n  var wasClean = true;\n  this._close(code || 1000, reason || 'Normal closure', wasClean);\n};\n\nSockJS.prototype.send = function(data) {\n  // #13 - convert anything non-string to string\n  // TODO this currently turns objects into [object Object]\n  if (typeof data !== 'string') {\n    data = '' + data;\n  }\n  if (this.readyState === SockJS.CONNECTING) {\n    throw new Error('InvalidStateError: The connection has not been established yet');\n  }\n  if (this.readyState !== SockJS.OPEN) {\n    return;\n  }\n  this._transport.send(escape.quote(data));\n};\n\nSockJS.version = require('./version');\n\nSockJS.CONNECTING = 0;\nSockJS.OPEN = 1;\nSockJS.CLOSING = 2;\nSockJS.CLOSED = 3;\n\nSockJS.prototype._receiveInfo = function(info, rtt) {\n  debug('_receiveInfo', rtt);\n  this._ir = null;\n  if (!info) {\n    this._close(1002, 'Cannot connect to server');\n    return;\n  }\n\n  // establish a round-trip timeout (RTO) based on the\n  // round-trip time (RTT)\n  this._rto = this.countRTO(rtt);\n  // allow server to override url used for the actual transport\n  this._transUrl = info.base_url ? info.base_url : this.url;\n  info = objectUtils.extend(info, this._urlInfo);\n  debug('info', info);\n  // determine list of desired and supported transports\n  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);\n  this._transports = enabledTransports.main;\n  debug(this._transports.length + ' enabled transports');\n\n  this._connect();\n};\n\nSockJS.prototype._connect = function() {\n  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {\n    debug('attempt', Transport.transportName);\n    if (Transport.needBody) {\n      if (!global.document.body ||\n          (typeof global.document.readyState !== 'undefined' &&\n            global.document.readyState !== 'complete' &&\n            global.document.readyState !== 'interactive')) {\n        debug('waiting for body');\n        this._transports.unshift(Transport);\n        eventUtils.attachEvent('load', this._connect.bind(this));\n        return;\n      }\n    }\n\n    // calculate timeout based on RTO and round trips. Default to 5s\n    var timeoutMs = (this._rto * Transport.roundTrips) || 5000;\n    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);\n    debug('using timeout', timeoutMs);\n\n    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());\n    debug('transport url', transportUrl);\n    var transportObj = new Transport(transportUrl, this._transUrl);\n    transportObj.on('message', this._transportMessage.bind(this));\n    transportObj.once('close', this._transportClose.bind(this));\n    transportObj.transportName = Transport.transportName;\n    this._transport = transportObj;\n\n    return;\n  }\n  this._close(2000, 'All transports failed', false);\n};\n\nSockJS.prototype._transportTimeout = function() {\n  debug('_transportTimeout');\n  if (this.readyState === SockJS.CONNECTING) {\n    this._transportClose(2007, 'Transport timed out');\n  }\n};\n\nSockJS.prototype._transportMessage = function(msg) {\n  debug('_transportMessage', msg);\n  var self = this\n    , type = msg.slice(0, 1)\n    , content = msg.slice(1)\n    , payload\n    ;\n\n  // first check for messages that don't need a payload\n  switch (type) {\n    case 'o':\n      this._open();\n      return;\n    case 'h':\n      this.dispatchEvent(new Event('heartbeat'));\n      debug('heartbeat', this.transport);\n      return;\n  }\n\n  if (content) {\n    try {\n      payload = JSON3.parse(content);\n    } catch (e) {\n      debug('bad json', content);\n    }\n  }\n\n  if (typeof payload === 'undefined') {\n    debug('empty payload', content);\n    return;\n  }\n\n  switch (type) {\n    case 'a':\n      if (Array.isArray(payload)) {\n        payload.forEach(function(p) {\n          debug('message', self.transport, p);\n          self.dispatchEvent(new TransportMessageEvent(p));\n        });\n      }\n      break;\n    case 'm':\n      debug('message', this.transport, payload);\n      this.dispatchEvent(new TransportMessageEvent(payload));\n      break;\n    case 'c':\n      if (Array.isArray(payload) && payload.length === 2) {\n        this._close(payload[0], payload[1], true);\n      }\n      break;\n  }\n};\n\nSockJS.prototype._transportClose = function(code, reason) {\n  debug('_transportClose', this.transport, code, reason);\n  if (this._transport) {\n    this._transport.removeAllListeners();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {\n    this._connect();\n    return;\n  }\n\n  this._close(code, reason);\n};\n\nSockJS.prototype._open = function() {\n  debug('_open', this._transport.transportName, this.readyState);\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transportTimeoutId) {\n      clearTimeout(this._transportTimeoutId);\n      this._transportTimeoutId = null;\n    }\n    this.readyState = SockJS.OPEN;\n    this.transport = this._transport.transportName;\n    this.dispatchEvent(new Event('open'));\n    debug('connected', this.transport);\n  } else {\n    // The server might have been restarted, and lost track of our\n    // connection.\n    this._close(1006, 'Server lost session');\n  }\n};\n\nSockJS.prototype._close = function(code, reason, wasClean) {\n  debug('_close', this.transport, code, reason, wasClean, this.readyState);\n  var forceFail = false;\n\n  if (this._ir) {\n    forceFail = true;\n    this._ir.close();\n    this._ir = null;\n  }\n  if (this._transport) {\n    this._transport.close();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (this.readyState === SockJS.CLOSED) {\n    throw new Error('InvalidStateError: SockJS has already been closed');\n  }\n\n  this.readyState = SockJS.CLOSING;\n  setTimeout(function() {\n    this.readyState = SockJS.CLOSED;\n\n    if (forceFail) {\n      this.dispatchEvent(new Event('error'));\n    }\n\n    var e = new CloseEvent('close');\n    e.wasClean = wasClean || false;\n    e.code = code || 1000;\n    e.reason = reason;\n\n    this.dispatchEvent(e);\n    this.onmessage = this.onclose = this.onerror = null;\n    debug('disconnected');\n  }.bind(this), 0);\n};\n\n// See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/\n// and RFC 2988.\nSockJS.prototype.countRTO = function(rtt) {\n  // In a local environment, when using IE8/9 and the `jsonp-polling`\n  // transport the time needed to establish a connection (the time that pass\n  // from the opening of the transport to the call of `_dispatchOpen`) is\n  // around 200msec (the lower bound used in the article above) and this\n  // causes spurious timeouts. For this reason we calculate a value slightly\n  // larger than that used in the article.\n  if (rtt > 100) {\n    return 4 * rtt; // rto > 400msec\n  }\n  return 300 + rtt; // 300msec < rto <= 400msec\n};\n\nmodule.exports = function(availableTransports) {\n  transports = transport(availableTransports);\n  require('./iframe-bootstrap')(SockJS, availableTransports);\n  return SockJS;\n};\n"]}