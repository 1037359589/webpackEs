{"version":3,"sources":["polling.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC;IAC9B,YAAY,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,YAAY,CAC9C;;AAEH,IAAI,KAAK,GAAG,YAAW,EAAE,CAAC;AAC1B,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EAAE;AACzC,OAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,uBAAuB,CAAC,CAAC;CACnD;;AAED,SAAS,OAAO,CAAC,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE;AACjD,OAAK,CAAC,UAAU,CAAC,CAAC;AAClB,cAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACxB,MAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,MAAI,CAAC,UAAU,GAAG,UAAU,CAAC;AAC7B,MAAI,CAAC,UAAU,GAAG,UAAU,CAAC;AAC7B,MAAI,CAAC,iBAAiB,EAAE,CAAC;CAC1B;;AAED,QAAQ,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;;AAEhC,OAAO,CAAC,SAAS,CAAC,iBAAiB,GAAG,YAAW;AAC/C,OAAK,CAAC,mBAAmB,CAAC,CAAC;AAC3B,MAAI,IAAI,GAAG,IAAI,CAAC;AAChB,MAAI,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;;AAE3E,MAAI,CAAC,EAAE,CAAC,SAAS,EAAE,UAAS,GAAG,EAAE;AAC/B,SAAK,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;AACtB,QAAI,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;GAC3B,CAAC,CAAC;;AAEH,MAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAS,IAAI,EAAE,MAAM,EAAE;AACxC,SAAK,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;AACjD,QAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;;AAExB,QAAI,CAAC,IAAI,CAAC,aAAa,EAAE;AACvB,UAAI,MAAM,KAAK,SAAS,EAAE;AACxB,YAAI,CAAC,iBAAiB,EAAE,CAAC;OAC1B,MAAM;AACL,YAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,IAAI,EAAE,MAAM,CAAC,CAAC;AACzC,YAAI,CAAC,kBAAkB,EAAE,CAAC;OAC3B;KACF;GACF,CAAC,CAAC;CACJ,CAAC;;AAEF,OAAO,CAAC,SAAS,CAAC,KAAK,GAAG,YAAW;AACnC,OAAK,CAAC,OAAO,CAAC,CAAC;AACf,MAAI,CAAC,kBAAkB,EAAE,CAAC;AAC1B,MAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,MAAI,IAAI,CAAC,IAAI,EAAE;AACb,QAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;GACnB;CACF,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC","file":"polling-compiled.js","sourcesContent":["'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:polling');\n}\n\nfunction Polling(Receiver, receiveUrl, AjaxObject) {\n  debug(receiveUrl);\n  EventEmitter.call(this);\n  this.Receiver = Receiver;\n  this.receiveUrl = receiveUrl;\n  this.AjaxObject = AjaxObject;\n  this._scheduleReceiver();\n}\n\ninherits(Polling, EventEmitter);\n\nPolling.prototype._scheduleReceiver = function() {\n  debug('_scheduleReceiver');\n  var self = this;\n  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);\n\n  poll.on('message', function(msg) {\n    debug('message', msg);\n    self.emit('message', msg);\n  });\n\n  poll.once('close', function(code, reason) {\n    debug('close', code, reason, self.pollIsClosing);\n    self.poll = poll = null;\n\n    if (!self.pollIsClosing) {\n      if (reason === 'network') {\n        self._scheduleReceiver();\n      } else {\n        self.emit('close', code || 1006, reason);\n        self.removeAllListeners();\n      }\n    }\n  });\n};\n\nPolling.prototype.abort = function() {\n  debug('abort');\n  this.removeAllListeners();\n  this.pollIsClosing = true;\n  if (this.poll) {\n    this.poll.abort();\n  }\n};\n\nmodule.exports = Polling;\n"]}