{"version":3,"sources":["sender-receiver.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC;IAC9B,QAAQ,GAAG,OAAO,CAAC,iBAAiB,CAAC;IACrC,cAAc,GAAG,OAAO,CAAC,mBAAmB,CAAC;IAC7C,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAC/B;;AAEH,IAAI,KAAK,GAAG,YAAW,EAAE,CAAC;AAC1B,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EAAE;AACzC,OAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,+BAA+B,CAAC,CAAC;CAC3D;;AAED,SAAS,cAAc,CAAC,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE;AAC7E,MAAI,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;AACpD,OAAK,CAAC,OAAO,CAAC,CAAC;AACf,MAAI,IAAI,GAAG,IAAI,CAAC;AAChB,gBAAc,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;;AAEhD,MAAI,CAAC,IAAI,GAAG,IAAI,OAAO,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;AACvD,MAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,UAAS,GAAG,EAAE;AACpC,SAAK,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;AAC3B,QAAI,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;GAC3B,CAAC,CAAC;AACH,MAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAS,IAAI,EAAE,MAAM,EAAE;AAC7C,SAAK,CAAC,YAAY,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;AAClC,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;AACjC,QAAI,CAAC,KAAK,EAAE,CAAC;GACd,CAAC,CAAC;CACJ;;AAED,QAAQ,CAAC,cAAc,EAAE,cAAc,CAAC,CAAC;;AAEzC,cAAc,CAAC,SAAS,CAAC,KAAK,GAAG,YAAW;AAC1C,OAAK,CAAC,OAAO,CAAC,CAAC;AACf,MAAI,CAAC,kBAAkB,EAAE,CAAC;AAC1B,MAAI,IAAI,CAAC,IAAI,EAAE;AACb,QAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;AAClB,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC;GAClB;AACD,MAAI,CAAC,IAAI,EAAE,CAAC;CACb,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,cAAc,CAAC","file":"sender-receiver-compiled.js","sourcesContent":["'use strict';\n\nvar inherits = require('inherits')\n  , urlUtils = require('../../utils/url')\n  , BufferedSender = require('./buffered-sender')\n  , Polling = require('./polling')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender-receiver');\n}\n\nfunction SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {\n  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);\n  debug(pollUrl);\n  var self = this;\n  BufferedSender.call(this, transUrl, senderFunc);\n\n  this.poll = new Polling(Receiver, pollUrl, AjaxObject);\n  this.poll.on('message', function(msg) {\n    debug('poll message', msg);\n    self.emit('message', msg);\n  });\n  this.poll.once('close', function(code, reason) {\n    debug('poll close', code, reason);\n    self.poll = null;\n    self.emit('close', code, reason);\n    self.close();\n  });\n}\n\ninherits(SenderReceiver, BufferedSender);\n\nSenderReceiver.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  if (this.poll) {\n    this.poll.abort();\n    this.poll = null;\n  }\n  this.stop();\n};\n\nmodule.exports = SenderReceiver;\n"]}