{"version":3,"sources":["http_parser.js"],"names":[],"mappings":"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","file":"http_parser-compiled.js","sourcesContent":["'use strict';\n\nvar NodeHTTPParser = process.binding('http_parser').HTTPParser,\n    version        = NodeHTTPParser.RESPONSE ? 6 : 4;\n\nvar HttpParser = function(type) {\n  if (type === 'request')\n    this._parser = new NodeHTTPParser(NodeHTTPParser.REQUEST || 'request');\n  else\n    this._parser = new NodeHTTPParser(NodeHTTPParser.RESPONSE || 'response');\n\n  this._type     = type;\n  this._complete = false;\n  this.headers   = {};\n\n  var current = null,\n      self    = this;\n\n  this._parser.onHeaderField = function(b, start, length) {\n    current = b.toString('utf8', start, start + length).toLowerCase();\n  };\n\n  this._parser.onHeaderValue = function(b, start, length) {\n    var value = b.toString('utf8', start, start + length);\n\n    if (self.headers.hasOwnProperty(current))\n      self.headers[current] += ', ' + value;\n    else\n      self.headers[current] = value;\n  };\n\n  this._parser.onHeadersComplete = this._parser[NodeHTTPParser.kOnHeadersComplete] =\n  function(majorVersion, minorVersion, headers, method, pathname, statusCode) {\n    var info = arguments[0];\n\n    if (typeof info === 'object') {\n      method     = info.method;\n      pathname   = info.url;\n      statusCode = info.statusCode;\n      headers    = info.headers;\n    }\n\n    self.method     = (typeof method === 'number') ? HttpParser.METHODS[method] : method;\n    self.statusCode = statusCode;\n    self.url        = pathname;\n\n    if (!headers) return;\n\n    for (var i = 0, n = headers.length, key, value; i < n; i += 2) {\n      key   = headers[i].toLowerCase();\n      value = headers[i+1];\n      if (self.headers.hasOwnProperty(key))\n        self.headers[key] += ', ' + value;\n      else\n        self.headers[key] = value;\n    }\n\n    self._complete = true;\n  };\n};\n\nHttpParser.METHODS = {\n  0:  'DELETE',\n  1:  'GET',\n  2:  'HEAD',\n  3:  'POST',\n  4:  'PUT',\n  5:  'CONNECT',\n  6:  'OPTIONS',\n  7:  'TRACE',\n  8:  'COPY',\n  9:  'LOCK',\n  10: 'MKCOL',\n  11: 'MOVE',\n  12: 'PROPFIND',\n  13: 'PROPPATCH',\n  14: 'SEARCH',\n  15: 'UNLOCK',\n  16: 'REPORT',\n  17: 'MKACTIVITY',\n  18: 'CHECKOUT',\n  19: 'MERGE',\n  24: 'PATCH'\n};\n\nHttpParser.prototype.isComplete = function() {\n  return this._complete;\n};\n\nHttpParser.prototype.parse = function(chunk) {\n  var offset   = (version < 6) ? 1 : 0,\n      consumed = this._parser.execute(chunk, 0, chunk.length) + offset;\n\n  if (this._complete)\n    this.body = (consumed < chunk.length)\n              ? chunk.slice(consumed)\n              : new Buffer(0);\n};\n\nmodule.exports = HttpParser;\n"]}