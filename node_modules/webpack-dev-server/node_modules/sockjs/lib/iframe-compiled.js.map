{"version":3,"sources":["iframe.js"],"names":[],"mappings":";AACA,CAAC,YAAW;AACV,MAAI,eAAe,EAAE,KAAK,CAAC;;AAE3B,OAAK,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;;AAE3B,iBAAe,GAAG,ocAAoc,CAAC;;AAEvd,SAAO,CAAC,GAAG,GAAG;AACZ,UAAM,EAAE,UAAS,GAAG,EAAE,GAAG,EAAE;AACzB,UAAI,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,UAAU,CAAC;AACpC,aAAO,GAAG;AACR,0BAAkB,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU;OAC5C,CAAC;AACF,aAAO,GAAG,eAAe,CAAC;AAC1B,WAAK,CAAC,IAAI,OAAO,EAAE;AACjB,eAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;OAC1C;AACD,gBAAU,GAAG,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC;AAChD,UAAI,eAAe,IAAI,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,OAAO,CAAC,eAAe,CAAC,KAAK,UAAU,EAAE;AACjF,WAAG,CAAC,UAAU,GAAG,GAAG,CAAC;AACrB,eAAO,EAAE,CAAC;OACX;AACD,SAAG,CAAC,SAAS,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;AAC1D,SAAG,CAAC,SAAS,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AAClC,aAAO,OAAO,CAAC;KAChB;GACF,CAAC;CAEH,CAAA,CAAE,IAAI,CAAC,IAAI,CAAC,CAAC","file":"iframe-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.9.1\n(function() {\n  var iframe_template, utils;\n\n  utils = require('./utils');\n\n  iframe_template = \"<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"IE=edge\\\" />\\n  <meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\" />\\n  <script src=\\\"{{ sockjs_url }}\\\"></script>\\n  <script>\\n    document.domain = document.domain;\\n    SockJS.bootstrap_iframe();\\n  </script>\\n</head>\\n<body>\\n  <h2>Don't panic!</h2>\\n  <p>This is a SockJS hidden iframe. It's used for cross domain magic.</p>\\n</body>\\n</html>\";\n\n  exports.app = {\n    iframe: function(req, res) {\n      var content, context, k, quoted_md5;\n      context = {\n        '{{ sockjs_url }}': this.options.sockjs_url\n      };\n      content = iframe_template;\n      for (k in context) {\n        content = content.replace(k, context[k]);\n      }\n      quoted_md5 = '\"' + utils.md5_hex(content) + '\"';\n      if ('if-none-match' in req.headers && req.headers['if-none-match'] === quoted_md5) {\n        res.statusCode = 304;\n        return '';\n      }\n      res.setHeader('Content-Type', 'text/html; charset=UTF-8');\n      res.setHeader('ETag', quoted_md5);\n      return content;\n    }\n  };\n\n}).call(this);\n"]}