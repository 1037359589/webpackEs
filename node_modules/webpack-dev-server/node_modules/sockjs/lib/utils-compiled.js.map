{"version":3,"sources":["utils.js"],"names":[],"mappings":"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","file":"utils-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.9.1\n(function() {\n  var array_intersection, crypto, escapable, lookup, unroll_lookup;\n\n  crypto = require('crypto');\n\n  exports.array_intersection = array_intersection = function(arr_a, arr_b) {\n    var a, j, len, r;\n    r = [];\n    for (j = 0, len = arr_a.length; j < len; j++) {\n      a = arr_a[j];\n      if (arr_b.indexOf(a) !== -1) {\n        r.push(a);\n      }\n    }\n    return r;\n  };\n\n  exports.escape_selected = function(str, chars) {\n    var c, i, j, l, len, map, parts, r, ref, v;\n    map = {};\n    chars = '%' + chars;\n    for (j = 0, len = chars.length; j < len; j++) {\n      c = chars[j];\n      map[c] = escape(c);\n    }\n    r = new RegExp('([' + chars + '])');\n    parts = str.split(r);\n    for (i = l = 0, ref = parts.length; 0 <= ref ? l < ref : l > ref; i = 0 <= ref ? ++l : --l) {\n      v = parts[i];\n      if (v.length === 1 && v in map) {\n        parts[i] = map[v];\n      }\n    }\n    return parts.join('');\n  };\n\n  exports.buffer_concat = function(buf_a, buf_b) {\n    var dst;\n    dst = new Buffer(buf_a.length + buf_b.length);\n    buf_a.copy(dst);\n    buf_b.copy(dst, buf_a.length);\n    return dst;\n  };\n\n  exports.md5_hex = function(data) {\n    return crypto.createHash('md5').update(data).digest('hex');\n  };\n\n  exports.sha1_base64 = function(data) {\n    return crypto.createHash('sha1').update(data).digest('base64');\n  };\n\n  exports.timeout_chain = function(arr) {\n    var fun, ref, timeout, user_fun;\n    arr = arr.slice(0);\n    if (!arr.length) {\n      return;\n    }\n    ref = arr.shift(), timeout = ref[0], user_fun = ref[1];\n    fun = (function(_this) {\n      return function() {\n        user_fun();\n        return exports.timeout_chain(arr);\n      };\n    })(this);\n    return setTimeout(fun, timeout);\n  };\n\n  exports.objectExtend = function(dst, src) {\n    var k;\n    for (k in src) {\n      if (src.hasOwnProperty(k)) {\n        dst[k] = src[k];\n      }\n    }\n    return dst;\n  };\n\n  exports.overshadowListeners = function(ee, event, handler) {\n    var new_handler, old_listeners;\n    old_listeners = ee.listeners(event).slice(0);\n    ee.removeAllListeners(event);\n    new_handler = function() {\n      var j, len, listener;\n      if (handler.apply(this, arguments) !== true) {\n        for (j = 0, len = old_listeners.length; j < len; j++) {\n          listener = old_listeners[j];\n          listener.apply(this, arguments);\n        }\n        return false;\n      }\n      return true;\n    };\n    return ee.addListener(event, new_handler);\n  };\n\n  escapable = /[\\x00-\\x1f\\ud800-\\udfff\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufff0-\\uffff]/g;\n\n  unroll_lookup = function(escapable) {\n    var c, i, unrolled;\n    unrolled = {};\n    c = (function() {\n      var j, results;\n      results = [];\n      for (i = j = 0; j < 65536; i = ++j) {\n        results.push(String.fromCharCode(i));\n      }\n      return results;\n    })();\n    escapable.lastIndex = 0;\n    c.join('').replace(escapable, function(a) {\n      return unrolled[a] = '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    });\n    return unrolled;\n  };\n\n  lookup = unroll_lookup(escapable);\n\n  exports.quote = function(string) {\n    var quoted;\n    quoted = JSON.stringify(string);\n    escapable.lastIndex = 0;\n    if (!escapable.test(quoted)) {\n      return quoted;\n    }\n    return quoted.replace(escapable, function(a) {\n      return lookup[a];\n    });\n  };\n\n  exports.parseCookie = function(cookie_header) {\n    var cookie, cookies, j, len, parts, ref;\n    cookies = {};\n    if (cookie_header) {\n      ref = cookie_header.split(';');\n      for (j = 0, len = ref.length; j < len; j++) {\n        cookie = ref[j];\n        parts = cookie.split('=');\n        cookies[parts[0].trim()] = (parts[1] || '').trim();\n      }\n    }\n    return cookies;\n  };\n\n  exports.random32 = function() {\n    var foo, v;\n    foo = crypto.randomBytes(4);\n    v = [foo[0], foo[1], foo[2], foo[3]];\n    return v[0] + (v[1] * 256) + (v[2] * 256 * 256) + (v[3] * 256 * 256 * 256);\n  };\n\n}).call(this);\n"]}