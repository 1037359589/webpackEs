{"version":3,"sources":["webjs.js"],"names":[],"mappings":"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","file":"webjs-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.9.1\n(function() {\n  var GenericApp, execute_request, fake_response, fs, http, querystring, url, utils;\n\n  url = require('url');\n\n  querystring = require('querystring');\n\n  fs = require('fs');\n\n  http = require('http');\n\n  utils = require('./utils');\n\n  execute_request = function(app, funs, req, res, data) {\n    var fun, results, x;\n    try {\n      results = [];\n      while (funs.length > 0) {\n        fun = funs.shift();\n        req.last_fun = fun;\n        results.push(data = app[fun](req, res, data, req.next_filter));\n      }\n      return results;\n    } catch (_error) {\n      x = _error;\n      if (typeof x === 'object' && 'status' in x) {\n        if (x.status === 0) {\n          return;\n        } else if ('handle_' + x.status in app) {\n          app['handle_' + x.status](req, res, x);\n        } else {\n          app['handle_error'](req, res, x);\n        }\n      } else {\n        app['handle_error'](req, res, x);\n      }\n      return app['log_request'](req, res, true);\n    }\n  };\n\n  fake_response = function(req, res) {\n    var headers;\n    headers = {\n      'Connection': 'close'\n    };\n    res.writeHead = function(status, user_headers) {\n      var k, r, x;\n      if (user_headers == null) {\n        user_headers = {};\n      }\n      r = [];\n      r.push('HTTP/' + req.httpVersion + ' ' + status + ' ' + http.STATUS_CODES[status]);\n      utils.objectExtend(headers, user_headers);\n      for (k in headers) {\n        r.push(k + ': ' + headers[k]);\n      }\n      r = r.concat(['', '']);\n      try {\n        res.write(r.join('\\r\\n'));\n      } catch (_error) {\n        x = _error;\n      }\n      try {\n        return res.end();\n      } catch (_error) {\n        x = _error;\n      }\n    };\n    return res.setHeader = function(k, v) {\n      return headers[k] = v;\n    };\n  };\n\n  exports.generateHandler = function(app, dispatcher) {\n    return function(req, res, head) {\n      var allowed_methods, found, funs, i, j, l, len, m, method, path, ref, row;\n      if (typeof res.writeHead === \"undefined\") {\n        fake_response(req, res);\n      }\n      utils.objectExtend(req, url.parse(req.url, true));\n      req.start_date = new Date();\n      found = false;\n      allowed_methods = [];\n      for (j = 0, len = dispatcher.length; j < len; j++) {\n        row = dispatcher[j];\n        method = row[0], path = row[1], funs = row[2];\n        if (path.constructor !== Array) {\n          path = [path];\n        }\n        m = req.pathname.match(path[0]);\n        if (!m) {\n          continue;\n        }\n        if (!req.method.match(new RegExp(method))) {\n          allowed_methods.push(method);\n          continue;\n        }\n        for (i = l = 1, ref = path.length; 1 <= ref ? l < ref : l > ref; i = 1 <= ref ? ++l : --l) {\n          req[path[i]] = m[i];\n        }\n        funs = funs.slice(0);\n        funs.push('log_request');\n        req.next_filter = function(data) {\n          return execute_request(app, funs, req, res, data);\n        };\n        req.next_filter(head);\n        found = true;\n        break;\n      }\n      if (!found) {\n        if (allowed_methods.length !== 0) {\n          app['handle_405'](req, res, allowed_methods);\n        } else {\n          app['handle_404'](req, res);\n        }\n        app['log_request'](req, res, true);\n      }\n    };\n  };\n\n  exports.GenericApp = GenericApp = (function() {\n    function GenericApp() {}\n\n    GenericApp.prototype.handle_404 = function(req, res, x) {\n      if (res.finished) {\n        return x;\n      }\n      res.writeHead(404, {});\n      res.end();\n      return true;\n    };\n\n    GenericApp.prototype.handle_405 = function(req, res, methods) {\n      res.writeHead(405, {\n        'Allow': methods.join(', ')\n      });\n      res.end();\n      return true;\n    };\n\n    GenericApp.prototype.handle_error = function(req, res, x) {\n      if (res.finished) {\n        return x;\n      }\n      if (typeof x === 'object' && 'status' in x) {\n        res.writeHead(x.status, {});\n        res.end(x.message || \"\");\n      } else {\n        try {\n          res.writeHead(500, {});\n          res.end(\"500 - Internal Server Error\");\n        } catch (_error) {\n          x = _error;\n        }\n        this.log('error', 'Exception on \"' + req.method + ' ' + req.href + '\" in filter \"' + req.last_fun + '\":\\n' + (x.stack || x));\n      }\n      return true;\n    };\n\n    GenericApp.prototype.log_request = function(req, res, data) {\n      var td;\n      td = (new Date()) - req.start_date;\n      this.log('info', req.method + ' ' + req.url + ' ' + td + 'ms ' + (res.finished ? res._header.split('\\r')[0].split(' ')[1] : '(unfinished)'));\n      return data;\n    };\n\n    GenericApp.prototype.log = function(severity, line) {\n      return console.log(line);\n    };\n\n    GenericApp.prototype.expose_html = function(req, res, content) {\n      if (res.finished) {\n        return content;\n      }\n      if (!res.getHeader('Content-Type')) {\n        res.setHeader('Content-Type', 'text/html; charset=UTF-8');\n      }\n      return this.expose(req, res, content);\n    };\n\n    GenericApp.prototype.expose_json = function(req, res, content) {\n      if (res.finished) {\n        return content;\n      }\n      if (!res.getHeader('Content-Type')) {\n        res.setHeader('Content-Type', 'application/json');\n      }\n      return this.expose(req, res, JSON.stringify(content));\n    };\n\n    GenericApp.prototype.expose = function(req, res, content) {\n      if (res.finished) {\n        return content;\n      }\n      if (content && !res.getHeader('Content-Type')) {\n        res.setHeader('Content-Type', 'text/plain');\n      }\n      if (content) {\n        res.setHeader('Content-Length', content.length);\n      }\n      res.writeHead(res.statusCode);\n      res.end(content, 'utf8');\n      return true;\n    };\n\n    GenericApp.prototype.serve_file = function(req, res, filename, next_filter) {\n      var a;\n      a = function(error, content) {\n        if (error) {\n          res.writeHead(500);\n          res.end(\"can't read file\");\n        } else {\n          res.setHeader('Content-length', content.length);\n          res.writeHead(res.statusCode, res.headers);\n          res.end(content, 'utf8');\n        }\n        return next_filter(true);\n      };\n      fs.readFile(filename, a);\n      throw {\n        status: 0\n      };\n    };\n\n    GenericApp.prototype.cache_for = function(req, res, content) {\n      var exp;\n      res.cache_for = res.cache_for || 365 * 24 * 60 * 60;\n      res.setHeader('Cache-Control', 'public, max-age=' + res.cache_for);\n      exp = new Date();\n      exp.setTime(exp.getTime() + res.cache_for * 1000);\n      res.setHeader('Expires', exp.toGMTString());\n      return content;\n    };\n\n    GenericApp.prototype.h_no_cache = function(req, res, content) {\n      res.setHeader('Cache-Control', 'no-store, no-cache, must-revalidate, max-age=0');\n      return content;\n    };\n\n    GenericApp.prototype.expect_form = function(req, res, _data, next_filter) {\n      var data;\n      data = new Buffer(0);\n      req.on('data', (function(_this) {\n        return function(d) {\n          return data = utils.buffer_concat(data, new Buffer(d, 'binary'));\n        };\n      })(this));\n      req.on('end', (function(_this) {\n        return function() {\n          var q;\n          data = data.toString('utf-8');\n          switch ((req.headers['content-type'] || '').split(';')[0]) {\n            case 'application/x-www-form-urlencoded':\n              q = querystring.parse(data);\n              break;\n            case 'text/plain':\n            case '':\n              q = data;\n              break;\n            default:\n              _this.log('error', \"Unsupported content-type \" + req.headers['content-type']);\n              q = void 0;\n          }\n          return next_filter(q);\n        };\n      })(this));\n      throw {\n        status: 0\n      };\n    };\n\n    GenericApp.prototype.expect_xhr = function(req, res, _data, next_filter) {\n      var data;\n      data = new Buffer(0);\n      req.on('data', (function(_this) {\n        return function(d) {\n          return data = utils.buffer_concat(data, new Buffer(d, 'binary'));\n        };\n      })(this));\n      req.on('end', (function(_this) {\n        return function() {\n          var q;\n          data = data.toString('utf-8');\n          switch ((req.headers['content-type'] || '').split(';')[0]) {\n            case 'text/plain':\n            case 'T':\n            case 'application/json':\n            case 'application/xml':\n            case '':\n            case 'text/xml':\n              q = data;\n              break;\n            default:\n              _this.log('error', 'Unsupported content-type ' + req.headers['content-type']);\n              q = void 0;\n          }\n          return next_filter(q);\n        };\n      })(this));\n      throw {\n        status: 0\n      };\n    };\n\n    return GenericApp;\n\n  })();\n\n}).call(this);\n"]}