{"version":3,"sources":["ring_buffer.js"],"names":[],"mappings":"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","file":"ring_buffer-compiled.js","sourcesContent":["'use strict';\n\nvar RingBuffer = function(bufferSize) {\n  this._buffer     = new Array(bufferSize);\n  this._bufferSize = bufferSize;\n  this._ringOffset = 0;\n  this._ringSize   = bufferSize;\n  this._head       = 0;\n  this._tail       = 0;\n  this.length      = 0;\n};\n\nRingBuffer.prototype.push = function(value) {\n  var expandBuffer = false,\n      expandRing   = false;\n\n  if (this._ringSize < this._bufferSize) {\n    expandBuffer = (this._tail === 0);\n  } else if (this._ringOffset === this._ringSize) {\n    expandBuffer = true;\n    expandRing   = (this._tail === 0);\n  }\n\n  if (expandBuffer) {\n    this._tail       = this._bufferSize;\n    this._buffer     = this._buffer.concat(new Array(this._bufferSize));\n    this._bufferSize = this._buffer.length;\n\n    if (expandRing)\n      this._ringSize = this._bufferSize;\n  }\n\n  this._buffer[this._tail] = value;\n  this.length += 1;\n  if (this._tail < this._ringSize) this._ringOffset += 1;\n  this._tail = (this._tail + 1) % this._bufferSize;\n};\n\nRingBuffer.prototype.peek = function() {\n  if (this.length === 0) return void 0;\n  return this._buffer[this._head];\n};\n\nRingBuffer.prototype.shift = function() {\n  if (this.length === 0) return void 0;\n\n  var value = this._buffer[this._head];\n  this._buffer[this._head] = void 0;\n  this.length -= 1;\n  this._ringOffset -= 1;\n\n  if (this._ringOffset === 0 && this.length > 0) {\n    this._head       = this._ringSize;\n    this._ringOffset = this.length;\n    this._ringSize   = this._bufferSize;\n  } else {\n    this._head = (this._head + 1) % this._ringSize;\n  }\n  return value;\n};\n\nmodule.exports = RingBuffer;\n"]}